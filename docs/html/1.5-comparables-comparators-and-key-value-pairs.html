<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-GB" xml:lang="en-GB">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Cliff Shaffer" />
  <meta name="author" content="Peter Ljunglöf" />
  <meta name="author" content="Nick Smallbone" />
  <title>DSABook – Comparables, Comparators and Key-Value Pairs</title>
  <style>
    div.sitenav { display: flex; flex-direction: row; flex-wrap: wrap; }
    span.navlink { flex: 1; }
    span.navlink-label { display: inline-block; min-width: 4em; }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        background-color: #ffffff;
        color: #a0a0a0;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
    div.sourceCode
      { color: #1f1c1b; background-color: #ffffff; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #1f1c1b; } /* Normal */
    code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
    code span.an { color: #ca60ca; } /* Annotation */
    code span.at { color: #0057ae; } /* Attribute */
    code span.bn { color: #b08000; } /* BaseN */
    code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
    code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #924c9d; } /* Char */
    code span.cn { color: #aa5500; } /* Constant */
    code span.co { color: #898887; } /* Comment */
    code span.cv { color: #0095ff; } /* CommentVar */
    code span.do { color: #607880; } /* Documentation */
    code span.dt { color: #0057ae; } /* DataType */
    code span.dv { color: #b08000; } /* DecVal */
    code span.er { color: #bf0303; text-decoration: underline; } /* Error */
    code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
    code span.fl { color: #b08000; } /* Float */
    code span.fu { color: #644a9b; } /* Function */
    code span.im { color: #ff5500; } /* Import */
    code span.in { color: #b08000; } /* Information */
    code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
    code span.op { color: #1f1c1b; } /* Operator */
    code span.ot { color: #006e28; } /* Other */
    code span.pp { color: #006e28; } /* Preprocessor */
    code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
    code span.sc { color: #3daee9; } /* SpecialChar */
    code span.ss { color: #ff5500; } /* SpecialString */
    code span.st { color: #bf0303; } /* String */
    code span.va { color: #0057ae; } /* Variable */
    code span.vs { color: #bf0303; } /* VerbatimString */
    code span.wa { color: #bf0303; } /* Warning */
  </style>
  <link rel="stylesheet" href="../bookstyle.css" />
  
  <link rel="stylesheet" href="../lib/JSAV.css" type="text/css" />
  <link rel="stylesheet" href="../lib/odsaMOD.css" type="text/css" />
  <link rel="stylesheet" href="../lib/jquery.ui.min.css" type="text/css" />
  <link rel="stylesheet" href="../lib/odsaStyle.css" type="text/css" />
  <link rel="stylesheet" href="../lib/ChalmersGU-interactive.css" type="text/css" />

  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:    './',
      VERSION:     '0.4.1',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE:  true
    };
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true,
      },
      "HTML-CSS": {
        scale: "80",
      }
    });
  </script>

  <script type="text/javascript" src="../lib/jquery.min.js"></script>
  <script type="text/javascript" src="../lib/jquery.migrate.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <script type="text/javascript" src="../lib/localforage.min.js"></script>
  <script type="text/javascript" src="../lib/accessibility.js"></script>
  <script type="text/javascript" src="../lib/jquery.ui.min.js"></script>
  <script type="text/javascript" src="../lib/jquery.transit.js"></script>
  <script type="text/javascript" src="../lib/raphael.js"></script>
  <script type="text/javascript" src="../lib/JSAV.js"></script>
  <script type="text/javascript" src="../lib/config.js"></script>
  <script type="text/javascript" src="../lib/timeme.js"></script>
  <script type="text/javascript" src="../lib/odsaUtils.js"></script>
  <script type="text/javascript" src="../lib/odsaMOD.js"></script>
  <script type="text/javascript" src="../lib/d3.min.js"></script>
  <script type="text/javascript" src="../lib/d3-selection-multi.v1.min.js"></script>
  <script type="text/javascript" src="../lib/dataStructures.js"></script>
  <script type="text/javascript" src="../lib/conceptMap.js"></script>

  <script>
    ODSA.SETTINGS.MODULE_SECTIONS = [
    'internal-variables', 
    'getting-and-setting-values', 
    'adding-elements', 
    'add-practice-exericse', 
    'removing-elements', 
    'remove-practice-exericise', 
    'static-array-based-list-summary-questions', 
    'static-array-based-list:-full-code',
    ];
    ODSA.SETTINGS.MODULE_NAME = "DSABook";
    ODSA.SETTINGS.MODULE_LONG_NAME = "Data Structures and Algorithms";
    JSAV_OPTIONS['lang']='en';
    JSAV_EXERCISE_OPTIONS['code']='pseudo';
  </script>

</head>
<body>
<nav id="sitenav">
<div class="sitenav">
<span class="navlink">
<span class="navlink-label">Up:</span> <a href="1-introduction.html" accesskey="u" rel="up">Introduction</a>
</span>
<span class="navlink">
<span class="navlink-label">Top:</span> <a href="index.html" accesskey="t" rel="top">Data Structures and Algorithms</a>
</span>
</div>
<div class="sitenav">
<span class="navlink">
<span class="navlink-label">Next:</span> <a href="1.6-comparables-and-comparators-an-example.html" accesskey="n" rel="next">Comparables and Comparators: An Example</a>
</span>
<span class="navlink">
<span class="navlink-label">Previous:</span> <a href="1.4-information-retrieval-sets-and-maps.html" accesskey="p" rel="previous">Information retrieval: Sets and Maps</a>
</span>
</div>
</nav>
<section id="comparables-comparators-and-key-value-pairs" class="level2"
data-number="1.5">
<h2 data-number="1.5"><span class="header-section-number">1.5</span>
Comparables, Comparators and Key-Value Pairs</h2>
<p>If we want to sort some things, we have to be able to compare them,
to decide which one is bigger. How do we compare two things? If all that
we wanted to sort or search for was simple integer values, this would
not be an interesting question. We can just use standard comparison
operators like “&lt;” or “&gt;”. Even if we wanted to store strings,
most programming languages give us built-in functions for comparing
strings alphabetically. But we do not usually want to store just
integers or strings in a data structure. Usually we want to store
records, where a record is made up of multiple values, such as a name,
an address, and a phone number. In that case, how can we “compare”
records to decide which one is “smaller”? We cannot just use “&lt;” to
compare the records! Nearly always in this situation, we are actually
interested in sorting the records based on the values of one particular
field used to represent the record, which itself is something simple
like an integer. This field is referred to as the <a href="10-glossary.html#key" class="term">key</a> for the record.</p>
<p>Likewise, if we want to search for a given record in a database, how
should we describe what we are looking for? A database record could
simply be a number, or it could be quite complicated, such as a payroll
record with many fields of varying types. We do not want to describe
what we are looking for by detailing and matching the entire contents of
the record. If we knew everything about the record already, we probably
would not need to look for it. Instead, we typically define what record
we want in terms of a key value. For example, if searching for payroll
records, we might wish to search for the record that matches a
particular ID number. In this example the ID number is the <a href="10-glossary.html#search-key" class="term">search key</a>.</p>
<section id="comparables" class="level3" data-number="1.5.1">
<h3 data-number="1.5.1"><span class="header-section-number">1.5.1</span>
Comparables</h3>
<p>To implement sorting or searching, we require that keys be <a href="10-glossary.html#comparable" class="term">comparable</a>. At a minimum, we must be able to take
two keys and reliably determine whether they are equal or not. That is
enough to enable a sequential search through a database of records and
find one that matches a given key. However, we typically would like for
the keys to define a <a href="10-glossary.html#total-order" class="term">total order</a>, which means
that we can always tell which of two keys is greater than the other.
Using key types with total orderings gives the database implementor the
opportunity to organize a collection of records in a way that makes
searching more efficient. An example is storing the records in sorted
order in an array, which permits a binary search. Fortunately, in
practice most fields of most records consist of simple data types with
natural total orders. For example, integers, floats, doubles, and
character strings all are totally ordered.</p>
<p>But if we want to write a general purpose sorting or searching
function, we need a general way to get the key for the record. We could
insist that every record have a particular method called
<code>.key()</code>. That seems like a good name for it!</p>
<p>Some languages like Java and C++ have special infrastructure for
supporting this (such as the <code>Comparable</code> interface in Java,
which has the <code>.compareTo()</code> method for defining the exact
process by which two objects are compared). But many languages like
Processing and JavaScript do not.</p>
<p>But what if the programmer had already used that method name for
another purpose? An even bigger problem is, what if the programmer wants
to sort the record now using one field as the key, and later using
another field? Or search sometimes on one key, and at other times on
another? The problem is that the “keyness” of a given field is not an
inherent property within the record, but rather depends on the context.
So, you cannot always count on being able to use your favorite method
name (or even the comparable interface) to extract the desired key
value.</p>
</section>
<section id="comparators" class="level3" data-number="1.5.2">
<h3 data-number="1.5.2"><span class="header-section-number">1.5.2</span>
Comparators</h3>
<p>Another, more general approach is to supply a function or class –
called a <a href="10-glossary.html#comparator" class="term">comparator</a> –whose job is to extract
the key from the record. A comparator function can be passed in as a
parameter, such as in a call to a sorting function. In this case, the
comparator function would be invoked on two records whenever they need
to be compared. In this way, different comparator functions can be
passed in to handle different record types or different fields within a
record. In Java (with generics) or C++ (with templates), a comparator
class can be a parameter for another class definition. For example, a
BST could take a comparator class as a generics parameter in Java. This
comparator class would be responsible for dealing with the comparison of
two records.</p>
</section>
<section id="key-value-pairs" class="level3" data-number="1.5.3">
<h3 data-number="1.5.3"><span class="header-section-number">1.5.3</span>
Key-Value Pairs</h3>
<p>One good general-purpose solution is to explicitly store <a href="10-glossary.html#key-value-pair" class="term">key-value pairs</a> in the data
structure. For example, if we want to sort a bunch of records, we can
store them in an array where every array entry contains both a key value
for the record and a pointer to the record itself.</p>
<p>The main places where we will need to be concerned with comparing
records and extracting keys is for various map implementations and
sorting algorithms. Here is a simple class for representing key-value
pairs:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> KVPair:</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, key, value):</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.key <span class="op">=</span> key</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.value <span class="op">=</span> value</span></code></pre></div>
<p>Using this we can easily implement a <strong>Map</strong> from an
underlying <strong>List</strong>, which we will discuss further in the
<a
href="4.6-implementing-maps-using-lists.html#implementing-maps-using-lists">chapter
about linear structures</a>.</p>
</section>
<section id="sorting-using-comparables" class="level3"
data-number="1.5.4">
<h3 data-number="1.5.4"><span class="header-section-number">1.5.4</span>
Sorting using Comparables</h3>
<p>To keep them clear and simple, visualizations for sorting algorithms
will usually show them as operating on integer values stored in an
array. But almost never do people really want to sort an array of
integers. But to be useful, a real sorting algorithm typically has to
deal with the fact that it is sorting a collection of records. A
general-purpose sorting routine meant to operate on multiple record
types would have to be written in a way to deal with the generic
comparison problem. To illustrate, here is an example of <a
href="2.4-insertion-sort.html#insertion-sort">Insertion Sort</a>
implemented to work on an array that stores records that support the
<code>Comparable</code> interface:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> insertionSort(A):</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(A)):  <span class="co"># Insert i&#39;th record</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>        j <span class="op">=</span> i</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> j <span class="op">&gt;</span> <span class="dv">0</span> <span class="kw">and</span> A[j] <span class="op">&lt;</span> A[j<span class="op">-</span><span class="dv">1</span>]:</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>            swap(A, j, j<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>            j <span class="op">-=</span> <span class="dv">1</span></span></code></pre></div>
</section>
<section id="review-questions" class="level3" data-number="1.5.5">
<h3 data-number="1.5.5"><span class="header-section-number">1.5.5</span>
Review questions</h3>
<p>
<div id="CompareSumm" class="embedContainer">
<iframe id="CompareSumm_iframe" aria-label="CompareSumm" src="../interactive/Design/CompareSumm.html" width="100%" height="600" scrolling="no">
Your browser does not support iframes.
</iframe>
</div>
</p>
</section>
</section>
</body>
</html>
