<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-GB" xml:lang="en-GB">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Peter Ljunglöf" />
  <meta name="author" content="Alex Gerdes" />
  <meta name="author" content="(editors)" />
  <title>DSABook – General lists</title>
  <link rel="stylesheet" href="../css/main.css" />
  <link rel="stylesheet" href="../css/book.css" />
  <link rel="stylesheet" href="../css/code.css" />
  <link rel="stylesheet" href="../css/math.css" />
  <link rel="stylesheet" href="../css/quiz.css" />
  <link rel="stylesheet" href="../css/mobile.css" />
  <link rel="stylesheet" href="../css/print.css" />
  
  <link rel="stylesheet" href="../lib/JSAV.css" type="text/css" />
  <link rel="stylesheet" href="../lib/odsaMOD.css" type="text/css" />
  <link rel="stylesheet" href="../lib/jquery.ui.min.css" type="text/css" />
  <link rel="stylesheet" href="../lib/odsaStyle.css" type="text/css" />

  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:    './',
      VERSION:     '0.4.1',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE:  true
    };
  </script>

  <script type="text/javascript" src="../lib/jquery.min.js"></script>
  <script type="text/javascript" src="../lib/jquery.migrate.min.js"></script>
  <script type="text/javascript" src="../lib/localforage.min.js"></script>
  <script type="text/javascript" src="../lib/accessibility.js"></script>
  <script type="text/javascript" src="../lib/jquery.ui.min.js"></script>
  <script type="text/javascript" src="../lib/jquery.transit.js"></script>
  <script type="text/javascript" src="../lib/raphael.js"></script>
  <script type="text/javascript" src="../lib/JSAV.js"></script>
  <script type="text/javascript" src="../lib/config.js"></script>
  <script type="text/javascript" src="../lib/timeme.js"></script>
  <script type="text/javascript" src="../lib/odsaUtils.js"></script>
  <script type="text/javascript" src="../lib/odsaMOD.js"></script>
  <script type="text/javascript" src="../lib/d3.min.js"></script>
  <script type="text/javascript" src="../lib/d3-selection-multi.v1.min.js"></script>
  <script type="text/javascript" src="../lib/dataStructures.js"></script>
  <script type="text/javascript" src="../lib/conceptMap.js"></script>

  <script>
    ODSA.SETTINGS.MODULE_SECTIONS = [
    'internal-variables', 
    'getting-and-setting-values', 
    'adding-elements', 
    'add-practice-exericse', 
    'removing-elements', 
    'remove-practice-exericise', 
    'static-array-based-list-summary-questions', 
    'static-array-based-list:-full-code',
    ];
    ODSA.SETTINGS.MODULE_NAME = "DSABook";
    ODSA.SETTINGS.MODULE_LONG_NAME = "Data Structures and Algorithms";
    JSAV_OPTIONS['lang']='en';
    JSAV_EXERCISE_OPTIONS['code']='pseudo';
  </script>

  
  <script type="text/javascript" src="../scripts/quizhandler.js"></script>
<link href="../interactive/ChalmersGU/CGU-Styles.css" rel="stylesheet" type="text/css"/>
</head>

<body>

<header>
<nav class="sitenav">
<div></div>
<h1><a href="index.html" class="navbutton" accesskey="t" rel="top">Data Structures and Algorithms</a></h1>
<div></div>
</nav>
<nav class="sitenav">
<div>
<a href="section-6.9.html" class="navbutton">&lt;&lt;</a>
<a href="section-6.9.html" accesskey="p" rel="previous">Double-ended queues</a>
</div>
<div>
<a href="section-6.11.html" accesskey="n" rel="next">Priority queues</a>
<a href="section-6.11.html" class="navbutton">&gt;&gt;</a>
</div>
</nav>
</header>

<main>
<section id="sec:general-lists" class="level2" data-number="6.10">
<h2 data-number="6.10"><span class="header-section-number">6.10</span>
General lists</h2>
<p>We need some notation to show the contents of a list, so we will use
the same angle bracket notation that is normally used to represent <a
href="section-14.html#sequence" class="term"
title="In set notation, a collection of elements with an order, and which may contain duplicate-valued elements. A sequence is also sometimes called a tuple or a vector.">sequences</a>.
To be consistent with standard array indexing, the first position on the
list is denoted as 0. Thus, if there are
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>
elements in the list, they are given positions 0 through
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n-1</annotation></semantics></math>
as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">⟨</mo><mspace width="0.222em"></mspace><msub><mi>a</mi><mn>0</mn></msub><mo>,</mo><mspace width="0.222em"></mspace><msub><mi>a</mi><mn>1</mn></msub><mo>,</mo><mspace width="0.222em"></mspace><mi>.</mi><mi>.</mi><mi>.</mi><mo>,</mo><mspace width="0.222em"></mspace><msub><mi>a</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mspace width="0.222em"></mspace><mo stretchy="false" form="postfix">⟩</mo></mrow><annotation encoding="application/x-tex">\langle\ a_0,\ a_1,\ ...,\ a_{n-1}\ \rangle</annotation></semantics></math>.
The subscript indicates an element’s position within the list. Using
this notation, the empty list would appear as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">⟨</mo><mspace width="0.222em"></mspace><mo stretchy="false" form="postfix">⟩</mo></mrow><annotation encoding="application/x-tex">\langle\ \rangle</annotation></semantics></math>.</p>
<p>What basic operations do we want our lists to support? Our common
intuition about lists tells us that a list should be able to grow and
shrink in size as we insert and remove elements. We should be able to
insert and remove elements from anywhere in the list. We should be able
to gain access to any element’s value, either to read it or to change
it. Finally, we should be able to know the size of the list, and to
iterate through the elements in the list – i.e., the list should be a
Collection.</p>
<div class="online">
<section id="sec:adt-for-general-lists" class="level3"
data-number="6.10.1">
<h3 data-number="6.10.1"><span
class="header-section-number">6.10.1</span> ADT for general lists</h3>
<p>Now we can define the ADT for a list object in terms of a set of
operations on that object. We will use an interface to formally define
the list ADT. <code>List</code> defines the member functions that any
list implementation inheriting from it must support, along with their
parameters and return types.</p>
<p>True to the notion of an ADT, an interface does not specify how
operations are implemented. Two complete implementations are presented
later (array-based lists and linked lists), both of which use the same
list ADT to define their operations. But they are considerably different
in approaches and in their space/time tradeoffs.</p>
<p>The code below presents our list ADT. The comments given with each
member function describe what it is intended to do. However, an
explanation of the basic design should help make this clearer. There are
four main operations we want to support:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode pseudo"><code class="sourceCode pseudo"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> <span class="bu">List</span> <span class="kw">extends</span> <span class="bu">Collection</span>:</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">add</span>(i, x)  <span class="co">// Adds (inserts) x at position i; where 0 &lt;= i &lt;= size, increasing the size.</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">get</span>(i)     <span class="co">// Returns the element at position i; where 0 &lt;= i &lt; size.</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">set</span>(i, x)  <span class="co">// Sets the value at position i to x; where 0 &lt;= i &lt; size.</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">remove</span>(i)  <span class="co">// Removes the element at position i; where 0 &lt;= i &lt; size, decreasing the size.</span></span></code></pre></div>
<p>Apart from these four, we also want to know the number of elements,
to be able to loop through the list elements in order. So we make the
List interface be a Collection too.</p>
<div class="dsvis">
<details open="true">
<summary>
<p>TODO</p>
</summary>
<p>
<div id="ListADT-Positions-CON" class="ssAV" data-short-name="ListADT-Positions-CON" data-long-name="List ADT Positions Slideshow" alt="List ADT Positions Slideshow" tabIndex="-1">
<span class="jsavcounter"></span>
<div class="jsavcontrols"></div>
<p class="jsavoutput jsavline"></p>
<div class="jsavcanvas"></div>
</div>
</p>
</details>
</div>
<p>The <code>List</code> member functions allow you to build a list with
elements in any desired order, and to access any desired position in the
list.</p>
<p>The list class declaration presented here is just one of many
possible interpretations for lists. Our list interface provides most of
the operations that one naturally expects to perform on lists and serves
to illustrate the issues relevant to implementing the list data
structure. As an example of using the list ADT, here is a function to
return <code>true</code> if there is an occurrence of a given element in
the list, and <code>false</code> otherwise. The <code>find</code> method
needs no knowledge about the specific list implementation, just the list
ADT.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode pseudo"><code class="sourceCode pseudo"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Return true if k is in list L, false otherwise.</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> find(L, k):</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="kw">each</span> n <span class="kw">in</span> L:</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> k <span class="op">==</span> n:</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="va">true</span>  <span class="co">// Found k.</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">false</span>         <span class="co">// k not found.</span></span></code></pre></div>
<p>There are two standard approaches to implementing lists, the <a
href="section-14.html#array-based-list" class="term"
title="An implementation for the list ADT that uses an array to store the list elements. Typical implementations fix the array size at creation of the list, and the overhead is the number of array positions that are presently unused.">array-based
list</a>, and the <a href="section-14.html#linked-list" class="term"
title="An implementation for the list ADT that uses dynamic allocation of link nodes to store the list elements. Common variants are the singly linked list, doubly linked list and circular list. The overhead required is the pointers in each link node.">linked
list</a>.</p>
</section>
<section id="sec:implementing-using-linked-lists" class="level3"
data-number="6.10.2">
<h3 data-number="6.10.2"><span
class="header-section-number">6.10.2</span> Implementing using linked
lists</h3>
<p>We can use the same structure as for stacks when implementing general
linked lists:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode pseudo"><code class="sourceCode pseudo"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">datatype</span> LinkedList <span class="kw">implements</span> <span class="bu">List</span>:</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    head: Node <span class="op">=</span> <span class="va">null</span>   <span class="co">// Pointer to list header</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">size</span>: <span class="bu">Int</span> <span class="op">=</span> <span class="dv">0</span>       <span class="co">// Size of list</span></span></code></pre></div>
<div class="dsvis">
<details open="true">
<summary>
<p>TODO</p>
</summary>
<p>
<div id="LinkedList-Iteration-CON" class="ssAV" data-short-name="LinkedList-Iteration-CON" data-long-name="Linked List Slideshow 1" alt="Linked List Slideshow 1" tabIndex="-1">
<span class="jsavcounter"></span>
<div class="jsavcontrols"></div>
<p class="jsavoutput jsavline"></p>
<div class="jsavcanvas"></div>
</div>
</p>
</details>
</div>
<section id="sec:adding-and-removing-nodes" class="level4 unnumbered">
<h4 class="unnumbered">Adding and removing nodes</h4>
<p>However, if we want to add or remove nodes, there is a problem with
using a pointer to the <code>current</code> node.</p>
<div class="dsvis">
<details open="true">
<summary>
<p>TODO</p>
</summary>
<p>
<div id="LinkedList-Problems-CON" class="ssAV" data-short-name="LinkedList-Problems-CON" data-long-name="Linked List Add/Remove Problems" alt="Linked List Add/Remove Problems" tabIndex="-1">
<span class="jsavcounter"></span>
<div class="jsavcontrols"></div>
<p class="jsavoutput jsavline"></p>
<div class="jsavcanvas"></div>
</div>
</p>
</details>
</div>
<p>So, using a <code>current</code> pointer, it is possible to add and
remove nodes, using some complicated coding. But this does not work for
the very last node! There are several possible ways to deal with this
problem. One is to always have an empty node (a “dummy node”) at the
very end of the list, but this will increase memory usage.</p>
<p>Another simple solution is to have a pointer to the node
<em>before</em> the current node. This is the solution we will
adopt.</p>
</section>
<section id="sec:adding-a-node" class="level4 unnumbered">
<h4 class="unnumbered">Adding a node</h4>
<div class="dsvis">
<details open="true">
<summary>
<p>TODO</p>
</summary>
<p>
<div id="LinkedList-Add-CON" class="ssAV" data-short-name="LinkedList-Add-CON" data-long-name="Linked List Add Slideshow" alt="Linked List Add Slideshow" tabIndex="-1">
<span class="jsavcounter"></span>
<div class="jsavcontrols"></div>
<p class="jsavoutput jsavline"></p>
<div class="jsavcanvas"></div>
</div>
</p>
</details>
</div>
<div class="dsvis">
<details open="true">
<summary>
<p>Here are some special cases for linked list insertion: Inserting at
the beginning of a list, and appending at the end.</p>
</summary>
<p>
<div id="LinkedList-AddSpecial-CON" class="ssAV" data-short-name="LinkedList-AddSpecial-CON" data-long-name="Linked List Add Special Cases Slideshow" alt="Linked List Add Special Cases Slideshow" tabIndex="-1">
<span class="jsavcounter"></span>
<div class="jsavcontrols"></div>
<p class="jsavoutput jsavline"></p>
<div class="jsavcanvas"></div>
</div>
</p>
</details>
</div>
<p>Here’s the code for addition.</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode pseudo"><code class="sourceCode pseudo"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">datatype</span> LinkedList:</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">add</span>(i, x):</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        <span class="co">// precondition: 0 &lt;= i &lt;= size</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> i <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>            head <span class="op">=</span> <span class="kw">new</span> Node(x, head)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>            prev <span class="op">=</span> head</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">repeat</span> i<span class="op">-</span><span class="dv">1</span> <span class="kw">times</span>:</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>                prev <span class="op">=</span> prev.<span class="bu">next</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>            prev.<span class="bu">next</span> <span class="op">=</span> <span class="kw">new</span> Node(x, prev.<span class="bu">next</span>)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>        <span class="bu">size</span> <span class="op">=</span> <span class="bu">size</span> <span class="op">+</span> <span class="dv">1</span></span></code></pre></div>
<div class="dsvis">
<details open="true">
<summary>
<p>Here’s an exercise for adding a value to a linked list.</p>
</summary>
<p>
<div id="LinkedList-Add-PRO" class="embedContainer">
<iframe id="LinkedList-Add-PRO_iframe" aria-label="LinkedList-Add-PRO" src="../interactive/ChalmersGU/LinkedList-Add-PRO.html" width="100%" height="600" scrolling="no">
Your browser does not support iframes.
</iframe>
</div>
</p>
</details>
</div>
</section>
<section id="sec:removing-a-node" class="level4 unnumbered">
<h4 class="unnumbered">Removing a node</h4>
<div class="dsvis">
<details open="true">
<summary>
<p>TODO</p>
</summary>
<p>
<div id="LinkedList-Remove-CON" class="ssAV" data-short-name="LinkedList-Remove-CON" data-long-name="Linked List Remove Slideshow" alt="Linked List Remove Slideshow" tabIndex="-1">
<span class="jsavcounter"></span>
<div class="jsavcontrols"></div>
<p class="jsavoutput jsavline"></p>
<div class="jsavcanvas"></div>
</div>
</p>
</details>
</div>
<p>Here’s the code for deletion:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode pseudo"><code class="sourceCode pseudo"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">datatype</span> LinkedList:</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">remove</span>(self, i):</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>        <span class="co">// precondition: 0 &lt;= i &lt; size</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> i <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>            removed <span class="op">=</span> head</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>            head <span class="op">=</span> removed.<span class="bu">next</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>            prev <span class="op">=</span> head</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">repeat</span> i<span class="op">-</span><span class="dv">1</span> <span class="kw">times</span>:</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                prev <span class="op">=</span> prev.<span class="bu">next</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>            removed <span class="op">=</span> prev.<span class="bu">next</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>            prev.<span class="bu">next</span> <span class="op">=</span> removed.<span class="bu">next</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>        removed.<span class="bu">next</span> <span class="op">=</span> <span class="va">null</span>   <span class="co">// For garbage collection</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>        <span class="bu">size</span> <span class="op">=</span> <span class="bu">size</span> <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> removed.elem</span></code></pre></div>
<div class="dsvis">
<details open="true">
<summary>
<p>And here’s an exercise.</p>
</summary>
<p>
<div id="LinkedList-Remove-PRO" class="embedContainer">
<iframe id="LinkedList-Remove-PRO_iframe" aria-label="LinkedList-Remove-PRO" src="../interactive/ChalmersGU/LinkedList-Remove-PRO.html" width="100%" height="700" scrolling="no">
Your browser does not support iframes.
</iframe>
</div>
</p>
</details>
</div>
</section>
<section id="sec:complexity-analysis-2" class="level4 unnumbered">
<h4 class="unnumbered">Complexity analysis</h4>
<p>Locating a certain position
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>
in the list requires
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>
steps. The worst case is if we want to go to the last node, so the time
complexity for above all operations is
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false" form="prefix">(</mo><mi>n</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math>.</p>
<p>This is much worse than the array-based list (<a
href="section-6.10.html#sec:implementing-general-lists-using-arrays">Section 6.10.3</a>),
where these operations are
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false" form="prefix">(</mo><mn>1</mn><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math>.
So are linked lists totally useless? No! But they don’t work well with
our current List interface.</p>
<p>To make linked lists useful, we need an enhanced iterator interface,
where we can move forwards and backwards in the list, and add/remove
nodes through this enhanced iterator. In the standard Java API, this
kind of iterator is called a <a
href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ListIterator.html">ListIterator</a>,
which is part of Java’s standard <a
href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/LinkedList.html">LinkedList</a>.</p>
</section>
</section>
</div>
<div class="online">
<section id="sec:implementing-general-lists-using-arrays" class="level3"
data-number="6.10.3">
<h3 data-number="6.10.3"><span
class="header-section-number">6.10.3</span> Implementing general lists
using arrays</h3>
<p>First we give a static implementation for array-based lists, named
<strong>ArrayList</strong>. This inherits from the List ADT (<a
href="section-6.10.html#sec:adt-for-general-lists">Section 6.10.1</a>),
and must therefore implement all of the member functions of
<code>List</code>.</p>
<p>Unlike normal arrays, lists can change in size: we can add elements
to and remove from them. How can this be implemented? Well, what we
<em>don’t</em> want to do is to create a completely new array every time
elements are added or removed. So instead we will use an underlying
array which is larger than we need.</p>
<p>Because of that will need two internal variables: the underlying
array, and a <em>size</em> counter telling how much of the array is
actually used. When we create a new array-list we have to decide the
<em>capacity</em>, the largest possible size. Then the underlying array
is initialised, and the size counter is set to 0 because there are no
elements yet.</p>
<div class="dsvis">
<details open="true">
<summary>
<p>TODO</p>
</summary>
<p>
<div id="StaticArrayList-Vars-CON" class="ssAV" data-short-name="StaticArrayList-Vars-CON" data-long-name="Static Array-based List Variables Slideshow" alt="Static Array-based List Variables Slideshow" tabIndex="-1">
<span class="jsavcounter"></span>
<div class="jsavcontrols"></div>
<p class="jsavoutput jsavline"></p>
<div class="jsavcanvas"></div>
</div>
</p>
</details>
</div>
<div class="sourceCode" id="cb6"><pre
class="sourceCode pseudo"><code class="sourceCode pseudo"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">datatype</span> ArrayList <span class="kw">implements</span> <span class="bu">List</span>:</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    internalArray <span class="op">=</span> <span class="kw">new</span> <span class="bu">Array</span>(capacity)  <span class="co">// Internal array containing the list elements</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">size</span> <span class="op">=</span> <span class="dv">0</span>                             <span class="co">// Size of list</span></span></code></pre></div>
<p><em>Note</em>: in Python you cannot create an array with a certain
capacity. You can simulate it by creating a list with a number of empty
elements: <code>[None] * capacity</code>, but this is not a real
fixed-size array as explained just above.</p>
<section id="sec:getting-and-setting-values" class="level4 unnumbered">
<h4 class="unnumbered">Getting and setting values</h4>
<p>Random access to any element in the list is quick and easy.</p>
<div class="dsvis">
<details open="true">
<summary>
<p>TODO</p>
</summary>
<p>
<div id="StaticArrayList-Intro-CON" class="ssAV" data-short-name="StaticArrayList-Intro-CON" data-long-name="Static Array-based List Intro Slideshow" alt="Static Array-based List Intro Slideshow" tabIndex="-1">
<span class="jsavcounter"></span>
<div class="jsavcontrols"></div>
<p class="jsavoutput jsavline"></p>
<div class="jsavcanvas"></div>
</div>
</p>
</details>
</div>
<p>As you can see below, there are no loops in the methods
<code>get</code> and <code>set</code>, which means that both require
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false" form="prefix">(</mo><mn>1</mn><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math>
time.</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode pseudo"><code class="sourceCode pseudo"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">datatype</span> ArrayList:</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">get</span>(i):</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        <span class="co">// precondition: 0 &lt;= i &lt; size</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> internalArray[i]</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">set</span>(i, x):</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>        <span class="co">// precondition: 0 &lt;= i &lt; size</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        internalArray[i] <span class="op">=</span> x</span></code></pre></div>
</section>
<section id="sec:adding-elements" class="level4 unnumbered">
<h4 class="unnumbered">Adding elements</h4>
<p>Because the array-based list implementation is defined to store list
elements in contiguous cells of the array, the <code>add</code> and
<code>remove</code> methods must maintain this property.</p>
<p>Appending elements at the tail of an array-based list is
super-fast.</p>
<div class="dsvis">
<details open="true">
<summary>
<p>TODO</p>
</summary>
<p>
<div id="StaticArrayList-Append-CON" class="ssAV" data-short-name="StaticArrayList-Append-CON" data-long-name="Static Array-based List Append Slideshow" alt="Static Array-based List Append Slideshow" tabIndex="-1">
<span class="jsavcounter"></span>
<div class="jsavcontrols"></div>
<p class="jsavoutput jsavline"></p>
<div class="jsavcanvas"></div>
</div>
</p>
</details>
</div>
<p>However, adding an element at the head of the list requires shifting
all existing elements in the array by one position toward the tail.</p>
<div class="dsvis">
<details open="true">
<summary>
<p>TODO</p>
</summary>
<p>
<div id="StaticArrayList-Add-CON" class="ssAV" data-short-name="StaticArrayList-Add-CON" data-long-name="Static Array-based List Insertion Slideshow" alt="Static Array-based List Insertion Slideshow" tabIndex="-1">
<span class="jsavcounter"></span>
<div class="jsavcontrols"></div>
<p class="jsavoutput jsavline"></p>
<div class="jsavcanvas"></div>
</div>
</p>
</details>
</div>
<p>Therefore, if we want to add an element at position
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>,
then
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>−</mo><mi>i</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n - i - 1</annotation></semantics></math>
elements must shift toward the tail to leave room for the new element.
In the worst case, adding elements requires moving all
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>
elements, which is
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false" form="prefix">(</mo><mi>n</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math>.</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode pseudo"><code class="sourceCode pseudo"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">datatype</span> ArrayList:</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">add</span>(i, x):</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>        <span class="co">// precondition: 0 &lt;= i &lt;= size &lt; internalArray.size</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">size</span> <span class="op">=</span> <span class="bu">size</span> <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> k <span class="kw">in</span> <span class="bu">size</span><span class="op">-</span><span class="dv">1</span>, <span class="bu">size</span><span class="op">-</span><span class="dv">2</span> .. i<span class="op">+</span><span class="dv">1</span>:</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>            internalArray[k] <span class="op">=</span> internalArray[k<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        internalArray[i] <span class="op">=</span> x</span></code></pre></div>
</section>
<section id="sec:practice-exercise" class="level4 unnumbered">
<h4 class="unnumbered">Practice exercise</h4>
<div class="dsvis">
<details open="true">
<summary>
<p>TODO</p>
</summary>
<p>
<div id="StaticArrayList-Add-PRO" class="embedContainer">
<iframe id="StaticArrayList-Add-PRO_iframe" aria-label="StaticArrayList-Add-PRO" src="../interactive/ChalmersGU/StaticArrayList-Add-PRO.html" width="100%" height="600" scrolling="no">
Your browser does not support iframes.
</iframe>
</div>
</p>
</details>
</div>
</section>
<section id="sec:removing-elements-1" class="level4 unnumbered">
<h4 class="unnumbered">Removing elements</h4>
<p>Removing an element from the head of the list is similar to adding in
the sense that all remaining elements must shift. But now we have to
shift toward the head to fill in the gap, instead of toward the tail. If
we want to remove the element at position
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>,
then
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>−</mo><mi>i</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n - i - 1</annotation></semantics></math>
elements must shift toward the head, as shown in the following
slideshow.</p>
<div class="dsvis">
<details open="true">
<summary>
<p>TODO</p>
</summary>
<p>
<div id="StaticArrayList-Remove-CON" class="ssAV" data-short-name="StaticArrayList-Remove-CON" data-long-name="Static Array-based List Remove" alt="Static Array-based List Remove" tabIndex="-1">
<span class="jsavcounter"></span>
<div class="jsavcontrols"></div>
<p class="jsavoutput jsavline"></p>
<div class="jsavcanvas"></div>
</div>
</p>
</details>
</div>
<p>In the worst case, insertion or removal each requires moving all
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>
elements, which is
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false" form="prefix">(</mo><mi>n</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math>.</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode pseudo"><code class="sourceCode pseudo"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">datatype</span> ArrayList:</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">remove</span>(i):</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>        <span class="co">// precondition: 0 &lt;= i &lt; size</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>        x <span class="op">=</span> internalArray[i]</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> k <span class="kw">in</span> i<span class="op">+</span><span class="dv">1</span> .. <span class="bu">size</span><span class="op">-</span><span class="dv">1</span>:</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>            internalArray[k<span class="op">-</span><span class="dv">1</span>] <span class="op">=</span> internalArray[k]</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">size</span> <span class="op">=</span> <span class="bu">size</span> <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>        internalArray[<span class="bu">size</span>] <span class="op">=</span> <span class="va">null</span>  <span class="co">// For garbage collection</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> x</span></code></pre></div>
</section>
<section id="sec:practice-exercise-1" class="level4 unnumbered">
<h4 class="unnumbered">Practice exercise</h4>
<div class="dsvis">
<details open="true">
<summary>
<p>TODO</p>
</summary>
<p>
<div id="StaticArrayList-Remove-PRO" class="embedContainer">
<iframe id="StaticArrayList-Remove-PRO_iframe" aria-label="StaticArrayList-Remove-PRO" src="../interactive/ChalmersGU/StaticArrayList-Remove-PRO.html" width="100%" height="600" scrolling="no">
Your browser does not support iframes.
</iframe>
</div>
</p>
</details>
</div>
</section>
</section>
<section id="sec:when-to-use-linked-lists" class="level3"
data-number="6.10.4">
<h3 data-number="6.10.4"><span
class="header-section-number">6.10.4</span> When to use linked
lists?</h3>
<p>According to the calculations above, linked lists are worse than
array-based lists, because all operations are slow (linear time). So why
even bother using linked lists?</p>
<p>First there are limited versions of lists that can be implemented
efficiently using linked lists, we will look at [stacks] and [queues]
later.</p>
<p>Second, our list API is not the best for linked lists. If we instead
could have a pointer to the “current” list node, and have methods for
moving forward and backward in the list, several of the operations can
be constant time. In the Java standard API this is called a <a
href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ListIterator.html">ListIterator</a>,
which is part of Java’s standard <a
href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/LinkedList.html">LinkedList</a>.</p>
<p>But these advanced list iterators are not part of this course, and in
fact there are not many algorithms where list iterators are particularly
useful.</p>
</section>
<section id="sec:how-are-lists-implemented-in-the-standard-libraries"
class="level3" data-number="6.10.5">
<h3 data-number="6.10.5"><span
class="header-section-number">6.10.5</span> How are lists implemented in
the standard libraries?</h3>
<p>All serious languages have dynamic list implementations. Here are how
they are implemented in Java and Python:</p>
<ul>
<li>In Java, <a
href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ArrayList.html">java.util.ArrayList</a>
implements dynamic arrays, meaning that the internal array grows
automatically when necessary. The growth factor is 50%, so that if the
array has size 1024, it will grow with another 512 elements. [<a
href="https://github.com/openjdk/jdk/blob/961dcffc862a4830fbf26791835a98c12d4b513e/src/java.base/share/classes/java/util/ArrayList.java#L236">Source:
ArrayList.java</a>] However, the ArrayList will never shrink
automatically, but instead it’s up to the programmer to decide when to
shrink it.</li>
<li>Java’s <a
href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/LinkedList.html">java.util.LinkedList</a>
implements <a href="section-14.html#doubly-linked-list" class="term"
title="A linked list implementation variant where each list node contains access pointers to both the previous element and the next element on the list.">doubly-linked
list</a> (<a
href="section-6.9.html#sec:double-ended-queues">Section 6.9</a>), so
that the iterator can move forward and backward through the list. [<a
href="https://github.com/openjdk/jdk/blob/961dcffc862a4830fbf26791835a98c12d4b513e/src/java.base/share/classes/java/util/LinkedList.java#L974-L984">Source:
LinkedList.java</a>]</li>
<li>Python’s standard lists are dynamic. In fact, Python doesn’t even
support fixed-length lists, so our code in this chapter is a bit of a
hack. Python lists both grow and shrink the lists automatically, and the
growth factor is 1/8 (12.5%), meaning that if the array has size 1024,
it will grow with another 128 elements. It shrinks the array by 1/8
whenever less than half of the array is occupied. [<a
href="https://github.com/python/cpython/blob/e649e0658ff2af87b07d994c05ae048e16e31aae/Objects/listobject.c#L71">Source:
listobject.c</a>]</li>
</ul>
</section>
</div>
</section>
</main>

<footer>
<nav class="sitenav">
<div class="navlink">
<a href="section-6.9.html" class="navbutton">&lt;&lt;</a>
<a href="section-6.9.html" accesskey="p" rel="previous">Double-ended queues</a>
</div>
<div class="navlink">
<a href="section-6.11.html" accesskey="n" rel="next">Priority queues</a>
<a href="section-6.11.html" class="navbutton">&gt;&gt;</a>
</div>
</nav>
</footer>

<script type="text/javascript" src="../interactive/ChalmersGU/ListADT-Positions-CON.js"></script>
<script type="text/javascript" src="../interactive/ChalmersGU/LinkedList-Iteration-CON.js"></script>
<script type="text/javascript" src="../interactive/ChalmersGU/LinkedList-Problems-CON.js"></script>
<script type="text/javascript" src="../interactive/ChalmersGU/LinkedList-Add-CON.js"></script>
<script type="text/javascript" src="../interactive/ChalmersGU/LinkedList-AddSpecial-CON.js"></script>
<script type="text/javascript" src="../interactive/ChalmersGU/LinkedList-Remove-CON.js"></script>
<script type="text/javascript" src="../interactive/ChalmersGU/StaticArrayList-Vars-CON.js"></script>
<script type="text/javascript" src="../interactive/ChalmersGU/StaticArrayList-Intro-CON.js"></script>
<script type="text/javascript" src="../interactive/ChalmersGU/StaticArrayList-Append-CON.js"></script>
<script type="text/javascript" src="../interactive/ChalmersGU/StaticArrayList-Add-CON.js"></script>
<script type="text/javascript" src="../interactive/ChalmersGU/StaticArrayList-Remove-CON.js"></script>
</body>
</html>

