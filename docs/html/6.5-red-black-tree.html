<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-GB" xml:lang="en-GB">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Cliff Shaffer" />
  <meta name="author" content="Peter Ljunglöf" />
  <meta name="author" content="Nick Smallbone" />
  <title>DSABook – The Red-Black Tree (WORK IN PROGRESS)</title>
  <style>
    div.sitenav { display: flex; flex-direction: row; flex-wrap: wrap; }
    span.navlink { flex: 1; }
    span.navlink-label { display: inline-block; min-width: 4em; }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        background-color: #ffffff;
        color: #a0a0a0;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
    div.sourceCode
      { color: #1f1c1b; background-color: #ffffff; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #1f1c1b; } /* Normal */
    code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
    code span.an { color: #ca60ca; } /* Annotation */
    code span.at { color: #0057ae; } /* Attribute */
    code span.bn { color: #b08000; } /* BaseN */
    code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
    code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #924c9d; } /* Char */
    code span.cn { color: #aa5500; } /* Constant */
    code span.co { color: #898887; } /* Comment */
    code span.cv { color: #0095ff; } /* CommentVar */
    code span.do { color: #607880; } /* Documentation */
    code span.dt { color: #0057ae; } /* DataType */
    code span.dv { color: #b08000; } /* DecVal */
    code span.er { color: #bf0303; text-decoration: underline; } /* Error */
    code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
    code span.fl { color: #b08000; } /* Float */
    code span.fu { color: #644a9b; } /* Function */
    code span.im { color: #ff5500; } /* Import */
    code span.in { color: #b08000; } /* Information */
    code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
    code span.op { color: #1f1c1b; } /* Operator */
    code span.ot { color: #006e28; } /* Other */
    code span.pp { color: #006e28; } /* Preprocessor */
    code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
    code span.sc { color: #3daee9; } /* SpecialChar */
    code span.ss { color: #ff5500; } /* SpecialString */
    code span.st { color: #bf0303; } /* String */
    code span.va { color: #0057ae; } /* Variable */
    code span.vs { color: #bf0303; } /* VerbatimString */
    code span.wa { color: #bf0303; } /* Warning */
  </style>
  <link rel="stylesheet" href="../bookstyle.css" />
  
  <link rel="stylesheet" href="../lib/JSAV.css" type="text/css" />
  <link rel="stylesheet" href="../lib/odsaMOD.css" type="text/css" />
  <link rel="stylesheet" href="../lib/jquery.ui.min.css" type="text/css" />
  <link rel="stylesheet" href="../lib/odsaStyle.css" type="text/css" />
  <link rel="stylesheet" href="../lib/ChalmersGU-interactive.css" type="text/css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">


  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:    './',
      VERSION:     '0.4.1',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE:  true
    };
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true,
      },
      "HTML-CSS": {
        scale: "80",
      }
    });
  </script>

  <script type="text/javascript" src="../lib/jquery.min.js"></script>
  <script type="text/javascript" src="../lib/jquery.migrate.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <script type="text/javascript" src="../lib/localforage.min.js"></script>
  <script type="text/javascript" src="../lib/accessibility.js"></script>
  <script type="text/javascript" src="../lib/jquery.ui.min.js"></script>
  <script type="text/javascript" src="../lib/jquery.transit.js"></script>
  <script type="text/javascript" src="../lib/raphael.js"></script>
  <script type="text/javascript" src="../lib/JSAV.js"></script>
  <script type="text/javascript" src="../lib/config.js"></script>
  <script type="text/javascript" src="../lib/timeme.js"></script>
  <script type="text/javascript" src="../lib/odsaUtils.js"></script>
  <script type="text/javascript" src="../lib/odsaMOD.js"></script>
  <script type="text/javascript" src="../lib/d3.min.js"></script>
  <script type="text/javascript" src="../lib/d3-selection-multi.v1.min.js"></script>
  <script type="text/javascript" src="../lib/dataStructures.js"></script>
  <script type="text/javascript" src="../lib/conceptMap.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
  <script src="../scroll-toc.js"></script>

  <script>
    ODSA.SETTINGS.MODULE_SECTIONS = [
    'internal-variables', 
    'getting-and-setting-values', 
    'adding-elements', 
    'add-practice-exericse', 
    'removing-elements', 
    'remove-practice-exericise', 
    'static-array-based-list-summary-questions', 
    'static-array-based-list:-full-code',
    ];
    ODSA.SETTINGS.MODULE_NAME = "DSABook";
    ODSA.SETTINGS.MODULE_LONG_NAME = "Data Structures and Algorithms";
    JSAV_OPTIONS['lang']='en';
    JSAV_EXERCISE_OPTIONS['code']='pseudo';
  </script>

</head>
<body><div class="row">
<div class="col-3"><nav id="TOC" role="doc-toc" class="nav-scroll-header"><div class="nav-scroll">
<ul>
<li><a href="1-introduction.html#introduction"
id="toc-introduction"><span class="toc-section-number">1</span>
Introduction</a>
<ul>
<li><a
href="1.1-selecting-a-data-structure.html#selecting-a-data-structure"
id="toc-selecting-a-data-structure"><span
class="toc-section-number">1.1</span> Selecting a Data
Structure</a></li>
<li><a href="1.2-abstract-data-types.html#abstract-data-types"
id="toc-abstract-data-types"><span class="toc-section-number">1.2</span>
Abstract Data Types</a></li>
<li><a
href="1.3-all-adts-used-in-this-book.html#all-adts-used-in-this-book"
id="toc-all-adts-used-in-this-book"><span
class="toc-section-number">1.3</span> All ADTs Used in This
Book</a></li>
<li><a
href="1.4-information-retrieval-sets-and-maps.html#information-retrieval-sets-and-maps"
id="toc-information-retrieval-sets-and-maps"><span
class="toc-section-number">1.4</span> Information retrieval: Sets and
Maps</a></li>
<li><a
href="1.5-comparables-comparators-and-key-value-pairs.html#comparables-comparators-and-key-value-pairs"
id="toc-comparables-comparators-and-key-value-pairs"><span
class="toc-section-number">1.5</span> Comparables, Comparators and
Key-Value Pairs</a></li>
<li><a
href="1.6-comparables-and-comparators-an-example.html#comparables-and-comparators-an-example"
id="toc-comparables-and-comparators-an-example"><span
class="toc-section-number">1.6</span> Comparables and Comparators: An
Example</a></li>
</ul></li>
<li><a
href="2-arrays-searching-and-sorting.html#arrays-searching-and-sorting"
id="toc-arrays-searching-and-sorting"><span
class="toc-section-number">2</span> Arrays: searching and sorting</a>
<ul>
<li><a href="2.1-searching-in-an-array.html#searching-in-an-array"
id="toc-searching-in-an-array"><span
class="toc-section-number">2.1</span> Searching in an Array</a></li>
<li><a href="2.2-sorting.html#sorting" id="toc-sorting"><span
class="toc-section-number">2.2</span> Sorting</a></li>
<li><a
href="2.3-sorting-terminology-and-notation.html#sorting-terminology-and-notation"
id="toc-sorting-terminology-and-notation"><span
class="toc-section-number">2.3</span> Sorting Terminology and
Notation</a></li>
<li><a href="2.4-insertion-sort.html#insertion-sort"
id="toc-insertion-sort"><span class="toc-section-number">2.4</span>
Insertion Sort</a></li>
<li><a href="2.5-bubble-sort-optional.html#bubble-sort-optional"
id="toc-bubble-sort-optional"><span
class="toc-section-number">2.5</span> Bubble Sort (optional)</a></li>
<li><a href="2.6-selection-sort.html#selection-sort"
id="toc-selection-sort"><span class="toc-section-number">2.6</span>
Selection Sort</a></li>
<li><a
href="2.7-the-cost-of-exchange-sorting-optional.html#the-cost-of-exchange-sorting-optional"
id="toc-the-cost-of-exchange-sorting-optional"><span
class="toc-section-number">2.7</span> The Cost of Exchange Sorting
(optional)</a></li>
<li><a
href="2.8-optimizing-sort-algorithms-with-code-tuning-optional.html#optimizing-sort-algorithms-with-code-tuning-optional"
id="toc-optimizing-sort-algorithms-with-code-tuning-optional"><span
class="toc-section-number">2.8</span> Optimizing Sort Algorithms with
Code Tuning (optional)</a></li>
<li><a href="2.9-mergesort.html#mergesort" id="toc-mergesort"><span
class="toc-section-number">2.9</span> Mergesort</a></li>
<li><a href="2.10-implementing-mergesort.html#implementing-mergesort"
id="toc-implementing-mergesort"><span
class="toc-section-number">2.10</span> Implementing Mergesort</a></li>
<li><a href="2.11-quicksort.html#quicksort" id="toc-quicksort"><span
class="toc-section-number">2.11</span> Quicksort</a></li>
<li><a
href="2.12-an-empirical-comparison-of-sorting-algorithms.html#an-empirical-comparison-of-sorting-algorithms"
id="toc-an-empirical-comparison-of-sorting-algorithms"><span
class="toc-section-number">2.12</span> An Empirical Comparison of
Sorting Algorithms</a></li>
<li><a
href="2.13-lower-bounds-for-sorting-optional.html#lower-bounds-for-sorting-optional"
id="toc-lower-bounds-for-sorting-optional"><span
class="toc-section-number">2.13</span> Lower Bounds for Sorting
(optional)</a></li>
<li><a href="2.14-arrays-as-sets-or-maps.html#arrays-as-sets-or-maps"
id="toc-arrays-as-sets-or-maps"><span
class="toc-section-number">2.14</span> Arrays as Sets or Maps</a></li>
<li><a
href="2.15-sorting-summary-exercises.html#sorting-summary-exercises"
id="toc-sorting-summary-exercises"><span
class="toc-section-number">2.15</span> Sorting: Summary
Exercises</a></li>
</ul></li>
<li><a href="3-algorithm-analysis.html#algorithm-analysis"
id="toc-algorithm-analysis"><span class="toc-section-number">3</span>
Algorithm Analysis</a>
<ul>
<li><a
href="3.1-problems-algorithms-and-programs.html#problems-algorithms-and-programs"
id="toc-problems-algorithms-and-programs"><span
class="toc-section-number">3.1</span> Problems, Algorithms, and
Programs</a></li>
<li><a href="3.2-comparing-algorithms.html#comparing-algorithms"
id="toc-comparing-algorithms"><span
class="toc-section-number">3.2</span> Comparing Algorithms</a></li>
<li><a
href="3.3-best-worst-and-average-cases.html#best-worst-and-average-cases"
id="toc-best-worst-and-average-cases"><span
class="toc-section-number">3.3</span> Best, Worst, and Average
Cases</a></li>
<li><a
href="3.4-faster-computer-or-faster-algorithm.html#faster-computer-or-faster-algorithm"
id="toc-faster-computer-or-faster-algorithm"><span
class="toc-section-number">3.4</span> Faster Computer, or Faster
Algorithm?</a></li>
<li><a
href="3.5-asymptotic-analysis-and-upper-bounds.html#asymptotic-analysis-and-upper-bounds"
id="toc-asymptotic-analysis-and-upper-bounds"><span
class="toc-section-number">3.5</span> Asymptotic Analysis and Upper
Bounds</a></li>
<li><a
href="3.6-lower-bounds-and-theta-notation.html#lower-bounds-and-theta-notation"
id="toc-lower-bounds-and-theta-notation"><span
class="toc-section-number">3.6</span> Lower Bounds and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Θ</mi><annotation encoding="application/x-tex">\Theta</annotation></semantics></math>
Notation</a></li>
<li><a
href="3.7-calculating-program-running-time.html#calculating-program-running-time"
id="toc-calculating-program-running-time"><span
class="toc-section-number">3.7</span> Calculating Program Running
Time</a></li>
<li><a href="3.8-analyzing-problems.html#analyzing-problems"
id="toc-analyzing-problems"><span class="toc-section-number">3.8</span>
Analyzing Problems</a></li>
<li><a href="3.9-common-misunderstandings.html#common-misunderstandings"
id="toc-common-misunderstandings"><span
class="toc-section-number">3.9</span> Common Misunderstandings</a></li>
<li><a href="3.10-multiple-parameters.html#multiple-parameters"
id="toc-multiple-parameters"><span
class="toc-section-number">3.10</span> Multiple Parameters</a></li>
<li><a href="3.11-space-bounds.html#space-bounds"
id="toc-space-bounds"><span class="toc-section-number">3.11</span> Space
Bounds</a></li>
<li><a
href="3.12-code-tuning-and-empirical-analysis.html#code-tuning-and-empirical-analysis"
id="toc-code-tuning-and-empirical-analysis"><span
class="toc-section-number">3.12</span> Code Tuning and Empirical
Analysis</a></li>
<li><a
href="3.13-algorithm-analysis-summary-exercises.html#algorithm-analysis-summary-exercises"
id="toc-algorithm-analysis-summary-exercises"><span
class="toc-section-number">3.13</span> Algorithm Analysis: Summary
Exercises</a></li>
<li><a href="3.14-summary-exercise-cs3.html#summary-exercise-cs3"
id="toc-summary-exercise-cs3"><span
class="toc-section-number">3.14</span> Summary Exercise: CS3</a></li>
<li><a
href="3.15-growth-rates-review-optional-work-in-progress.html#growth-rates-review-optional-work-in-progress"
id="toc-growth-rates-review-optional-work-in-progress"><span
class="toc-section-number">3.15</span> Growth Rates Review (optional)
(WORK IN PROGRESS)</a></li>
<li><a
href="3.16-summation-techniques-optional-work-in-progress.html#summation-techniques-optional-work-in-progress"
id="toc-summation-techniques-optional-work-in-progress"><span
class="toc-section-number">3.16</span> Summation Techniques (optional)
(WORK IN PROGRESS)</a></li>
<li><a
href="3.17-solving-recurrence-relations-optional-work-in-progress.html#solving-recurrence-relations-optional-work-in-progress"
id="toc-solving-recurrence-relations-optional-work-in-progress"><span
class="toc-section-number">3.17</span> Solving Recurrence Relations
(optional) (WORK IN PROGRESS)</a></li>
<li><a
href="3.18-amortized-analysis-optional-work-in-progress.html#amortized-analysis-optional-work-in-progress"
id="toc-amortized-analysis-optional-work-in-progress"><span
class="toc-section-number">3.18</span> Amortized Analysis (optional)
(WORK IN PROGRESS)</a></li>
</ul></li>
<li><a href="4-lists-1.html#lists-1" id="toc-lists-1"><span
class="toc-section-number">4</span> Lists</a>
<ul>
<li><a href="4.1-the-list-adt.html#the-list-adt"
id="toc-the-list-adt"><span class="toc-section-number">4.1</span> The
List ADT</a></li>
<li><a href="4.2-static-array-based-lists.html#static-array-based-lists"
id="toc-static-array-based-lists"><span
class="toc-section-number">4.2</span> Static Array-Based Lists</a></li>
<li><a
href="4.3-dynamic-array-based-lists.html#dynamic-array-based-lists"
id="toc-dynamic-array-based-lists"><span
class="toc-section-number">4.3</span> Dynamic Array-Based Lists</a></li>
<li><a href="4.4-linked-lists.html#linked-lists"
id="toc-linked-lists"><span class="toc-section-number">4.4</span> Linked
Lists</a></li>
<li><a
href="4.5-comparison-of-list-implementations.html#comparison-of-list-implementations"
id="toc-comparison-of-list-implementations"><span
class="toc-section-number">4.5</span> Comparison of List
Implementations</a></li>
<li><a
href="4.6-implementing-maps-using-lists.html#implementing-maps-using-lists"
id="toc-implementing-maps-using-lists"><span
class="toc-section-number">4.6</span> Implementing Maps using
Lists</a></li>
<li><a
href="4.7-doubly-linked-lists-optional.html#doubly-linked-lists-optional"
id="toc-doubly-linked-lists-optional"><span
class="toc-section-number">4.7</span> Doubly Linked Lists
(optional)</a></li>
<li><a href="4.8-stacks.html#stacks" id="toc-stacks"><span
class="toc-section-number">4.8</span> Stacks</a></li>
<li><a href="4.9-implementing-recursion.html#implementing-recursion"
id="toc-implementing-recursion"><span
class="toc-section-number">4.9</span> Implementing Recursion</a></li>
<li><a href="4.10-queues.html#queues" id="toc-queues"><span
class="toc-section-number">4.10</span> Queues</a></li>
<li><a
href="4.11-linear-structure-summary-exercises.html#linear-structure-summary-exercises"
id="toc-linear-structure-summary-exercises"><span
class="toc-section-number">4.11</span> Linear Structure Summary
Exercises</a></li>
</ul></li>
<li><a href="5-binary-trees.html#binary-trees"
id="toc-binary-trees"><span class="toc-section-number">5</span> Binary
Trees</a>
<ul>
<li><a
href="5.1-definitions-and-properties.html#definitions-and-properties"
id="toc-definitions-and-properties"><span
class="toc-section-number">5.1</span> Definitions and
Properties</a></li>
<li><a
href="5.2-binary-tree-as-a-recursive-data-structure.html#binary-tree-as-a-recursive-data-structure"
id="toc-binary-tree-as-a-recursive-data-structure"><span
class="toc-section-number">5.2</span> Binary Tree as a Recursive Data
Structure</a></li>
<li><a
href="5.3-binary-tree-node-implementations.html#binary-tree-node-implementations"
id="toc-binary-tree-node-implementations"><span
class="toc-section-number">5.3</span> Binary Tree Node
Implementations</a></li>
<li><a
href="5.4-the-full-binary-tree-theorem-optional.html#the-full-binary-tree-theorem-optional"
id="toc-the-full-binary-tree-theorem-optional"><span
class="toc-section-number">5.4</span> The Full Binary Tree Theorem
(optional)</a></li>
<li><a href="5.5-binary-tree-traversals.html#binary-tree-traversals"
id="toc-binary-tree-traversals"><span
class="toc-section-number">5.5</span> Binary Tree Traversals</a></li>
<li><a
href="5.6-implementing-tree-traversals.html#implementing-tree-traversals"
id="toc-implementing-tree-traversals"><span
class="toc-section-number">5.6</span> Implementing Tree
Traversals</a></li>
<li><a
href="5.7-information-flow-in-recursive-functions.html#information-flow-in-recursive-functions"
id="toc-information-flow-in-recursive-functions"><span
class="toc-section-number">5.7</span> Information Flow in Recursive
Functions</a></li>
<li><a
href="5.8-binary-tree-space-requirements-optional.html#binary-tree-space-requirements-optional"
id="toc-binary-tree-space-requirements-optional"><span
class="toc-section-number">5.8</span> Binary Tree Space Requirements
(optional)</a></li>
<li><a
href="5.9-multiple-binary-trees-optional.html#multiple-binary-trees-optional"
id="toc-multiple-binary-trees-optional"><span
class="toc-section-number">5.9</span> Multiple Binary Trees
(optional)</a></li>
<li><a
href="5.10-a-hard-information-flow-problem-optional.html#a-hard-information-flow-problem-optional"
id="toc-a-hard-information-flow-problem-optional"><span
class="toc-section-number">5.10</span> A Hard Information Flow Problem
(optional)</a></li>
<li><a
href="5.11-binary-tree-chapter-summary.html#binary-tree-chapter-summary"
id="toc-binary-tree-chapter-summary"><span
class="toc-section-number">5.11</span> Binary Tree Chapter
Summary</a></li>
<li><a href="5.12-general-trees-optional.html#general-trees-optional"
id="toc-general-trees-optional"><span
class="toc-section-number">5.12</span> General Trees (optional)</a></li>
<li><a
href="5.13-the-unionfind-algorithm-optional.html#the-unionfind-algorithm-optional"
id="toc-the-unionfind-algorithm-optional"><span
class="toc-section-number">5.13</span> The Union/Find Algorithm
(optional)</a></li>
<li><a
href="5.14-sequential-tree-representations-optional.html#sequential-tree-representations-optional"
id="toc-sequential-tree-representations-optional"><span
class="toc-section-number">5.14</span> Sequential Tree Representations
(optional)</a></li>
</ul></li>
<li><a href="6-binary-search-trees.html#binary-search-trees"
id="toc-binary-search-trees"><span class="toc-section-number">6</span>
Binary Search Trees</a>
<ul>
<li><a
href="6.1-binary-search-tree-definition.html#binary-search-tree-definition"
id="toc-binary-search-tree-definition"><span
class="toc-section-number">6.1</span> Binary Search Tree
Definition</a></li>
<li><a
href="6.2-binary-tree-guided-information-flow.html#binary-tree-guided-information-flow"
id="toc-binary-tree-guided-information-flow"><span
class="toc-section-number">6.2</span> Binary Tree Guided Information
Flow</a></li>
<li><a href="6.3-balanced-trees.html#balanced-trees"
id="toc-balanced-trees"><span class="toc-section-number">6.3</span>
Balanced Trees</a></li>
<li><a href="6.4-the-avl-tree.html#the-avl-tree"
id="toc-the-avl-tree"><span class="toc-section-number">6.4</span> The
AVL Tree</a></li>
<li><a href="6.5-red-black-tree.html#red-black-tree"
id="toc-red-black-tree"><span class="toc-section-number">6.5</span> The
Red-Black Tree (WORK IN PROGRESS)</a></li>
<li><a href="6.6-the-splay-tree-optional.html#the-splay-tree-optional"
id="toc-the-splay-tree-optional"><span
class="toc-section-number">6.6</span> The Splay Tree (optional)</a></li>
<li><a href="6.7-skip-lists-optional.html#skip-lists-optional"
id="toc-skip-lists-optional"><span class="toc-section-number">6.7</span>
Skip Lists (optional)</a></li>
<li><a
href="6.8-binary-search-tree-chapter-summary.html#binary-search-tree-chapter-summary"
id="toc-binary-search-tree-chapter-summary"><span
class="toc-section-number">6.8</span> Binary Search Tree Chapter
Summary</a></li>
</ul></li>
<li><a href="7-priority-queues.html#priority-queues"
id="toc-priority-queues"><span class="toc-section-number">7</span>
Priority queues</a>
<ul>
<li><a
href="7.1-array-implementation-for-complete-binary-trees.html#array-implementation-for-complete-binary-trees"
id="toc-array-implementation-for-complete-binary-trees"><span
class="toc-section-number">7.1</span> Array Implementation for Complete
Binary Trees</a></li>
<li><a
href="7.2-heaps-and-priority-queues.html#heaps-and-priority-queues"
id="toc-heaps-and-priority-queues"><span
class="toc-section-number">7.2</span> Heaps and Priority Queues</a></li>
<li><a href="7.3-heapsort.html#heapsort" id="toc-heapsort"><span
class="toc-section-number">7.3</span> Heapsort</a></li>
<li><a
href="7.4-huffman-coding-trees-optional.html#huffman-coding-trees-optional"
id="toc-huffman-coding-trees-optional"><span
class="toc-section-number">7.4</span> Huffman Coding Trees
(optional)</a></li>
<li><a
href="7.5-priority-queues-chapter-summary.html#priority-queues-chapter-summary"
id="toc-priority-queues-chapter-summary"><span
class="toc-section-number">7.5</span> Priority Queues Chapter
Summary</a></li>
</ul></li>
<li><a href="8-hashing.html#hashing" id="toc-hashing"><span
class="toc-section-number">8</span> Hashing</a>
<ul>
<li><a href="8.1-hash-function-principles.html#hash-function-principles"
id="toc-hash-function-principles"><span
class="toc-section-number">8.1</span> Hash Function Principles</a></li>
<li><a href="8.2-sample-hash-functions.html#sample-hash-functions"
id="toc-sample-hash-functions"><span
class="toc-section-number">8.2</span> Sample Hash Functions</a></li>
<li><a href="8.3-separate-chaining.html#separate-chaining"
id="toc-separate-chaining"><span class="toc-section-number">8.3</span>
Separate Chaining, or Open Hashing</a></li>
<li><a
href="8.4-converting-objects-to-table-indices.html#converting-objects-to-table-indices"
id="toc-converting-objects-to-table-indices"><span
class="toc-section-number">8.4</span> Converting Objects to Table
Indices</a></li>
<li><a href="8.5-bucket-hashing-optional.html#bucket-hashing-optional"
id="toc-bucket-hashing-optional"><span
class="toc-section-number">8.5</span> Bucket Hashing (optional)</a></li>
<li><a href="8.6-open-addressing.html#open-addressing"
id="toc-open-addressing"><span class="toc-section-number">8.6</span>
Open Addressing</a></li>
<li><a
href="8.7-improved-collision-resolution.html#improved-collision-resolution"
id="toc-improved-collision-resolution"><span
class="toc-section-number">8.7</span> Improved Collision
Resolution</a></li>
<li><a
href="8.8-analysis-of-open-addressing.html#analysis-of-open-addressing"
id="toc-analysis-of-open-addressing"><span
class="toc-section-number">8.8</span> Analysis of Open
Addressing</a></li>
<li><a href="8.9-open-addressing-deletion.html#open-addressing-deletion"
id="toc-open-addressing-deletion"><span
class="toc-section-number">8.9</span> Open Addressing, Deletion</a></li>
<li><a
href="8.10-hash-tables-in-real-life-optional.html#hash-tables-in-real-life-optional"
id="toc-hash-tables-in-real-life-optional"><span
class="toc-section-number">8.10</span> Hash Tables in Real Life
(optional)</a></li>
<li><a
href="8.11-hashing-chapter-summary-exercises.html#hashing-chapter-summary-exercises"
id="toc-hashing-chapter-summary-exercises"><span
class="toc-section-number">8.11</span> Hashing Chapter Summary
Exercises</a></li>
</ul></li>
<li><a href="9-graphs-1.html#graphs-1" id="toc-graphs-1"><span
class="toc-section-number">9</span> Graphs</a>
<ul>
<li><a href="9.1-graph-implementations.html#graph-implementations"
id="toc-graph-implementations"><span
class="toc-section-number">9.1</span> Graph Implementations</a></li>
<li><a href="9.2-graph-traversals.html#graph-traversals"
id="toc-graph-traversals"><span class="toc-section-number">9.2</span>
Graph Traversals</a></li>
<li><a href="9.3-topological-sort.html#topological-sort"
id="toc-topological-sort"><span class="toc-section-number">9.3</span>
Topological Sort</a></li>
<li><a href="9.4-shortest-paths-problems.html#shortest-paths-problems"
id="toc-shortest-paths-problems"><span
class="toc-section-number">9.4</span> Shortest-Paths Problems</a></li>
<li><a
href="9.5-minimal-cost-spanning-trees.html#minimal-cost-spanning-trees"
id="toc-minimal-cost-spanning-trees"><span
class="toc-section-number">9.5</span> Minimal Cost Spanning
Trees</a></li>
<li><a
href="9.6-all-pairs-shortest-paths-optional.html#all-pairs-shortest-paths-optional"
id="toc-all-pairs-shortest-paths-optional"><span
class="toc-section-number">9.6</span> All-Pairs Shortest Paths
(optional)</a></li>
<li><a href="9.7-graph-concepts-summary.html#graph-concepts-summary"
id="toc-graph-concepts-summary"><span
class="toc-section-number">9.7</span> Graph Concepts Summary</a></li>
</ul></li>
<li><a href="10-glossary.html#glossary" id="toc-glossary"><span
class="toc-section-number">10</span> Glossary</a></li>
<li><a href="11-bibliography.html#bibliography"
id="toc-bibliography"><span class="toc-section-number">11</span>
Bibliography</a></li>
</ul>
</div></nav></div>
<div class="col-9"><section id="red-black-tree" class="level2" data-number="6.5">
<h2 data-number="6.5"><span class="header-section-number">6.5</span> The
Red-Black Tree (WORK IN PROGRESS)</h2>
<!--
### Exercise 1

<avembed-todo id="redBlackTreeColoring" src="Development/redBlackTreeColoring.html" type="pe" name="Red-Black Tree Coloring Exercise"/>

### Exercise 2

<avembed-todo id="redBlackTreePRO" src="Development/redBlackTreePRO.html" type="pe" name="Red-Black Tree Proficiency Exercise"/>
-->
<div class="col-9"><section id="red-black-trees" class="level3" data-number="6.5.1">
<h3 data-number="6.5.1"><span class="header-section-number">6.5.1</span>
Red-black trees</h3>
<p>A 2-3 tree is a conceptually elegant way to maintain a balanced
search tree. By extending the binary search tree with 3-nodes, we can
keep the tree perfectly balanced at all times. By alternating
<em>splitting</em> and <em>merging</em>, we can add new elements to the
tree without breaking the invariant.</p>
<p>2-3 trees are, however, rarely used in practice. There are two major
problems with them:</p>
<ul>
<li>The code to implement them is quite complicated, even though the
algorithms are conceptually simple. This is because there are many
different cases - for example, inserting into the left child, the middle
child, or the right child of a node all require different code, even
though the algorithm is conceptually the same. This only gets worse when
we consider that some of the code also needs to handle 4-nodes, which
are created temporarily during insertion.</li>
<li>Most programming languages do not allow an object to change in size.
However, in a 2-3 tree, we sometimes need to change a 2-node into a
3-node. Therefore, all node objects must be big enough to store a
3-node. This wastes a lot of memory.</li>
</ul>
<p>In short, 2-3 trees are excellent on paper, but annoying to implement
in code - better as slideware than software. In this section, we shall
learn about red-black trees, which take the idea of 2-3 trees and adapt
it to be easier to code. Red-black trees are very efficient, and widely
used in practice. For example, TreeMap in Java and std::map in C++ are
both based on red-black trees.</p>
<p>Think back to binary heaps. A binary heap is conceptually a binary
tree, but it is represented as an array. The algorithms for modifying
binary heaps are conceptually tree algorithms, but we translated them to
work on the array representation of binary heaps.</p>
<p>Red-black trees are based on a similar idea. A red-black tree is
conceptually a 2-3 tree, but we represent it using a binary search tree.
The nodes of the 2-3 tree become nodes in the binary search tree.</p>
<p>A red-black tree is a binary search tree, but every node in the tree
also has a colour, either red or black. The colour of a node is stored
as a field in the node.</p>
<p>Given a 2-3 tree, here is how we represent it as a red-black tree. A
2-node is just going to become a single node in the tree, coloured
black:</p>
<p>A 3-node is going to turn into two nodes: a parent and its left
child. The parent is coloured black and the child is coloured red.</p>
<p>Here is an example of a 2-3 tree, and how it looks as a red-black
tree.</p>
<p>Notice that, starting from the red-black tree, we can reconstruct the
2-3 tree. A black node with a red left child corresponds to a 3-node,
and any other black node corresponds to a 2-node.</p>
<p>Quiz: Which of the following red-black trees correspond to valid 2-3
trees? That is, is there a 2-3 tree which, when translated, gives the
red-black tree? Don’t forget that a valid 2-3 tree must also be
perfectly balanced.</p>
<p>We are now ready to see the invariant for red-black trees. One way to
state the invariant is: <em>a red-black tree is valid if it corresponds
to a valid 2-3 tree</em>. However, we are going to state the invariant
more directly, in terms of the colours of the nodes in the red-black
tree. A red-black tree must obey the following rules:</p>
<p>1. The root of the tree must be black. (Because it must correspond to
either a 2-node or a 3-node.) 2. If a node is red, it must be the left
child of a black node. (This is how 3-nodes are represented.) 3. On
every path from the root to a null, there must be the same number of
black nodes.</p>
<p>... OR ...</p>
<p>Recall that in a 2-3 tree we have the following properties:</p>
<ol type="1">
<li>The tree is ordered (similar to a BST). 2. Every node is either a
2-node or a 3-node. 3. On any path from the root to a null, there are
the same number of nodes. (This is the perfect balance property.)</li>
</ol>
<p>Since a red-black tree is supposed to be the translation of a valid
2-3 tree, we are going to take the 2-3 tree invariants and translate
them to talk about BSTs. By doing so, we get the following invariants
for a red-black tree:</p>
<ol type="1">
<li>It must be a valid BST. 2. A red node can only occur as the left
child of a black node. (In particular, the root must not be red.)
<ol start="3" type="1">
<li><dl>
<dt>On any path from the root to a null, there are the same number</dt>
<dd>
<p>of <em>black</em> nodes.</p>
</dd>
</dl></li>
</ol></li>
</ol>
<p>example black, partial nodes, etc</p>
<p>We consider null to be black. XXX it correponds to a whole node in
the 2-3 tree</p>
</section></div>
<section id="red-black-trees-code" class="level3" data-number="6.5.2">
<h3 data-number="6.5.2"><span class="header-section-number">6.5.2</span>
Red-Black Trees Code</h3>
<p>For information about red-black trees, see the lecture handout “2-3
trees and red-black trees” under Theme 4 (Search trees).</p>
<p>Here is an implementation of red-black trees:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Python does not have internal classes, so we have to make the tree node class standalone.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Node:</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">&quot;&quot;&quot;A node in a red-black tree.&quot;&quot;&quot;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, is_red, key, value, left <span class="op">=</span> <span class="va">None</span>, right <span class="op">=</span> <span class="va">None</span>):</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>._is_red <span class="op">=</span> is_red</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.key <span class="op">=</span> key</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.value <span class="op">=</span> value</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.left <span class="op">=</span> left</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.right <span class="op">=</span> right</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> is_red(<span class="va">self</span>):</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="va">self</span> <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="va">self</span>._is_red</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> RedBlackMap(Map):</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">&quot;&quot;&quot;A dictionary implemented using a binary search tree.&quot;&quot;&quot;</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.root <span class="op">=</span> <span class="va">None</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.treeSize <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> check_invariant(<span class="va">self</span>):</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;Check that the invariant holds.&quot;&quot;&quot;</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">assert</span> <span class="kw">not</span> Node.is_red(<span class="va">self</span>.root), <span class="st">&quot;red root&quot;</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>        keys <span class="op">=</span> <span class="bu">list</span>(<span class="va">self</span>)</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">assert</span> <span class="bu">len</span>(keys) <span class="op">==</span> <span class="va">self</span>.treeSize, <span class="st">&quot;wrong tree size&quot;</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.check_invariant_helper(<span class="va">self</span>.root, <span class="va">None</span>, <span class="va">None</span>)</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">@staticmethod</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> check_invariant_helper(node, lo, hi):</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;Recurive helper method for &#39;check_invariant&#39;.</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="co">        Checks that the node is the root of a valid red-black tree, and that</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a><span class="co">        all keys k satisfy lo &lt; k &lt; hi. The test lo &lt; k is skipped</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="co">        if lo is None, and k &lt; hi is skipped if hi is None.</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns the &quot;black height&quot; of the tree.&quot;&quot;&quot;</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> node <span class="kw">is</span> <span class="va">None</span>: <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">assert</span> lo <span class="kw">is</span> <span class="va">None</span> <span class="kw">or</span> node.key <span class="op">&gt;</span> lo, <span class="st">&quot;key too small&quot;</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">assert</span> hi <span class="kw">is</span> <span class="va">None</span> <span class="kw">or</span> node.key <span class="op">&lt;</span> hi, <span class="st">&quot;key too big&quot;</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>        <span class="cf">assert</span> <span class="kw">not</span> Node.is_red(node.right), <span class="st">&quot;red right child&quot;</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>        <span class="cf">assert</span> <span class="kw">not</span> (Node.is_red(node) <span class="kw">and</span> Node.is_red(node.left)), <span class="st">&quot;red node with red left child&quot;</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Keys in the left subtree should be &lt; node.key</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Keys in the right subtree should be &gt; node.key</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>        h1 <span class="op">=</span> RedBlackMap.check_invariant_helper(node.left, lo, node.key)</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>        h2 <span class="op">=</span> RedBlackMap.check_invariant_helper(node.right, node.key, hi)</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>        <span class="cf">assert</span> h1 <span class="op">==</span> h2, <span class="st">&quot;unbalanced tree&quot;</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> h1 <span class="op">+</span> (<span class="dv">0</span> <span class="cf">if</span> Node.is_red(node) <span class="cf">else</span> <span class="dv">1</span>)</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> isEmpty(<span class="va">self</span>):</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;Return true if there are no keys.&quot;&quot;&quot;</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.root <span class="kw">is</span> <span class="va">None</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> size(<span class="va">self</span>):</span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;Return the number of keys.&quot;&quot;&quot;</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.treeSize</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> containsKey(<span class="va">self</span>, key):</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;Return true if the key has an associated value.&quot;&quot;&quot;</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.get(key) <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> get(<span class="va">self</span>, key):</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;Look up a key.&quot;&quot;&quot;</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.get_helper(<span class="va">self</span>.root, key)</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">@staticmethod</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> get_helper(node, key):</span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;Helper method for &#39;get&#39;.&quot;&quot;&quot;</span></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> node <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> node.key <span class="op">&gt;</span> key:</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> RedBlackMap.get_helper(node.left, key)</span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> node.key <span class="op">&lt;</span> key:</span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> RedBlackMap.get_helper(node.right, key)</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> node.value</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> put(<span class="va">self</span>, key, value):</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;Add a key-value pair, or update the value associated with an existing key. </span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns the value previously associated with the key, </span></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a><span class="co">        or None if the key was not present.&quot;&quot;&quot;</span></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.root, old_value <span class="op">=</span> <span class="va">self</span>.put_helper(<span class="va">self</span>.root, key, value)</span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> Node.is_red(<span class="va">self</span>.root):</span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.root._is_red <span class="op">=</span> <span class="va">False</span></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> old_value <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.treeSize <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> old_value</span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>    <span class="at">@staticmethod</span></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> put_helper(node, key, value):</span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;Recursive helper method for &#39;put&#39;.</span></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns the updated node, and the value previously associated with the key.&quot;&quot;&quot;</span></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> node <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> Node(<span class="va">True</span>, key, value, <span class="va">None</span>, <span class="va">None</span>), <span class="va">None</span></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> node.key <span class="op">&gt;</span> key:</span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>            node.left, old_value <span class="op">=</span> RedBlackMap.put_helper(node.left, key, value)</span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> node.key <span class="op">&lt;</span> key:</span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>            node.right, old_value <span class="op">=</span> RedBlackMap.put_helper(node.right, key, value)</span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>: <span class="co"># node.key == key</span></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>            old_value <span class="op">=</span> node.value</span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>            node.value <span class="op">=</span> value</span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> RedBlackMap.rebalance(node), old_value</span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> remove(<span class="va">self</span>, key):</span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;Delete a key. </span></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a><span class="co">        Not implemented yet!&quot;&quot;&quot;</span></span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">NotImplementedError</span>(<span class="st">&quot;remove is not implemented yet&quot;</span>)</span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>    <span class="at">@staticmethod</span></span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> rebalance(node):</span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> node <span class="kw">is</span> <span class="va">None</span>: <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Skew</span></span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> Node.is_red(node.right):</span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a>            node <span class="op">=</span> RedBlackMap.rotate_left(node)</span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Split part 1</span></span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> Node.is_red(node.left) <span class="kw">and</span> Node.is_red(node.left.left):</span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>            node <span class="op">=</span> RedBlackMap.rotate_right(node)</span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Split part 2</span></span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> Node.is_red(node.left) <span class="kw">and</span> Node.is_red(node.right):</span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a>            node.left._is_red <span class="op">=</span> <span class="va">False</span></span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a>            node.right._is_red <span class="op">=</span> <span class="va">False</span></span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a>            node._is_red <span class="op">=</span> <span class="va">True</span></span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> node</span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a>    <span class="at">@staticmethod</span></span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> rotate_left(node):</span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;</span></span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a><span class="co">        Left rotation.</span></span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a><span class="co">           x                 y</span></span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a><span class="co">          / \               / </span><span class="ch">\</span></span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a><span class="co">         A   y     ===&gt;    x   C</span></span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a><span class="co">            / \           / </span><span class="ch">\</span></span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a><span class="co">           B   C         A   B</span></span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a><span class="co">        &quot;&quot;&quot;</span></span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Variables are named according to the picture above.</span></span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a>        x <span class="op">=</span> node</span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a>        A <span class="op">=</span> x.left</span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a>        y <span class="op">=</span> x.right</span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a>        B <span class="op">=</span> y.left</span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a>        C <span class="op">=</span> y.right</span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a>        <span class="co"># We also swap x&#39;s and y&#39;s colours</span></span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a>        <span class="co"># (e.g. if x was black before, then y will be black afterwards).</span></span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> Node(is_red <span class="op">=</span> x.is_red(), key <span class="op">=</span> y.key, value <span class="op">=</span> y.value,</span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a>                    left <span class="op">=</span></span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a>                        Node(is_red <span class="op">=</span> y.is_red(), key <span class="op">=</span> x.key, value <span class="op">=</span> x.value,</span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a>                             left <span class="op">=</span> A, right <span class="op">=</span> B),</span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a>                    right <span class="op">=</span> C)</span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a>    <span class="at">@staticmethod</span></span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> rotate_right(node):</span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;</span></span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a><span class="co">        Right rotation.</span></span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a><span class="co">             x              y</span></span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a><span class="co">            / \            / </span><span class="ch">\</span></span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a><span class="co">           y   C   ===&gt;   A   x</span></span>
<span id="cb1-171"><a href="#cb1-171" aria-hidden="true" tabindex="-1"></a><span class="co">          / \                / </span><span class="ch">\</span></span>
<span id="cb1-172"><a href="#cb1-172" aria-hidden="true" tabindex="-1"></a><span class="co">         A   B              B   C</span></span>
<span id="cb1-173"><a href="#cb1-173" aria-hidden="true" tabindex="-1"></a><span class="co">        &quot;&quot;&quot;</span></span>
<span id="cb1-174"><a href="#cb1-174" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Variables are named according to the picture above.</span></span>
<span id="cb1-175"><a href="#cb1-175" aria-hidden="true" tabindex="-1"></a>        x <span class="op">=</span> node</span>
<span id="cb1-176"><a href="#cb1-176" aria-hidden="true" tabindex="-1"></a>        y <span class="op">=</span> x.left</span>
<span id="cb1-177"><a href="#cb1-177" aria-hidden="true" tabindex="-1"></a>        A <span class="op">=</span> y.left</span>
<span id="cb1-178"><a href="#cb1-178" aria-hidden="true" tabindex="-1"></a>        B <span class="op">=</span> y.right</span>
<span id="cb1-179"><a href="#cb1-179" aria-hidden="true" tabindex="-1"></a>        C <span class="op">=</span> x.right</span>
<span id="cb1-180"><a href="#cb1-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-181"><a href="#cb1-181" aria-hidden="true" tabindex="-1"></a>        <span class="co"># We also swap x&#39;s and y&#39;s colours</span></span>
<span id="cb1-182"><a href="#cb1-182" aria-hidden="true" tabindex="-1"></a>        <span class="co"># (e.g. if x was black before, then y will be black afterwards).</span></span>
<span id="cb1-183"><a href="#cb1-183" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> Node(is_red <span class="op">=</span> x.is_red(), key <span class="op">=</span> y.key, value <span class="op">=</span> y.value,</span>
<span id="cb1-184"><a href="#cb1-184" aria-hidden="true" tabindex="-1"></a>                    left <span class="op">=</span> A,</span>
<span id="cb1-185"><a href="#cb1-185" aria-hidden="true" tabindex="-1"></a>                    right <span class="op">=</span></span>
<span id="cb1-186"><a href="#cb1-186" aria-hidden="true" tabindex="-1"></a>                        Node(is_red <span class="op">=</span> y.is_red(), key <span class="op">=</span> x.key, value <span class="op">=</span> x.value,</span>
<span id="cb1-187"><a href="#cb1-187" aria-hidden="true" tabindex="-1"></a>                             left <span class="op">=</span> B, right <span class="op">=</span> C))</span>
<span id="cb1-188"><a href="#cb1-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-189"><a href="#cb1-189" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__iter__</span>(<span class="va">self</span>):</span>
<span id="cb1-190"><a href="#cb1-190" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;Iterate through all keys.</span></span>
<span id="cb1-191"><a href="#cb1-191" aria-hidden="true" tabindex="-1"></a><span class="co">        This is called when the user writes &#39;for key in bst: ...&#39;.&quot;&quot;&quot;</span></span>
<span id="cb1-192"><a href="#cb1-192" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.iter_helper(<span class="va">self</span>.root)</span>
<span id="cb1-193"><a href="#cb1-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-194"><a href="#cb1-194" aria-hidden="true" tabindex="-1"></a>    <span class="at">@staticmethod</span></span>
<span id="cb1-195"><a href="#cb1-195" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> iter_helper(node):</span>
<span id="cb1-196"><a href="#cb1-196" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;Helper method for &#39;__iter__&#39;.&quot;&quot;&quot;</span></span>
<span id="cb1-197"><a href="#cb1-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-198"><a href="#cb1-198" aria-hidden="true" tabindex="-1"></a>        <span class="co"># This method is a generator:</span></span>
<span id="cb1-199"><a href="#cb1-199" aria-hidden="true" tabindex="-1"></a>        <span class="co"># https://docs.python.org/3/howto/functional.html#generators</span></span>
<span id="cb1-200"><a href="#cb1-200" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Generators are an easy way to make iterators</span></span>
<span id="cb1-201"><a href="#cb1-201" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> node <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb1-202"><a href="#cb1-202" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span></span>
<span id="cb1-203"><a href="#cb1-203" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb1-204"><a href="#cb1-204" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> key <span class="kw">in</span> RedBlackMap.iter_helper(node.left):</span>
<span id="cb1-205"><a href="#cb1-205" aria-hidden="true" tabindex="-1"></a>                <span class="cf">yield</span> key</span>
<span id="cb1-206"><a href="#cb1-206" aria-hidden="true" tabindex="-1"></a>            <span class="cf">yield</span> node.key</span>
<span id="cb1-207"><a href="#cb1-207" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> key <span class="kw">in</span> RedBlackMap.iter_helper(node.right):</span>
<span id="cb1-208"><a href="#cb1-208" aria-hidden="true" tabindex="-1"></a>                <span class="cf">yield</span> key</span>
<span id="cb1-209"><a href="#cb1-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-210"><a href="#cb1-210" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__getitem__</span>(<span class="va">self</span>, key):</span>
<span id="cb1-211"><a href="#cb1-211" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;This is called when the user writes &#39;x = bst[key]&#39;.&quot;&quot;&quot;</span></span>
<span id="cb1-212"><a href="#cb1-212" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.get(key)</span>
<span id="cb1-213"><a href="#cb1-213" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-214"><a href="#cb1-214" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__setitem__</span>(<span class="va">self</span>, key, value):</span>
<span id="cb1-215"><a href="#cb1-215" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;This is called when the user writes &#39;bst[key] = value&#39;.&quot;&quot;&quot;</span></span>
<span id="cb1-216"><a href="#cb1-216" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.put(key, value)</span>
<span id="cb1-217"><a href="#cb1-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-218"><a href="#cb1-218" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__contains__</span>(<span class="va">self</span>, key):</span>
<span id="cb1-219"><a href="#cb1-219" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;This is called when the user writes &#39;key in bst&#39;.&quot;&quot;&quot;</span></span>
<span id="cb1-220"><a href="#cb1-220" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.containsKey(key)</span>
<span id="cb1-221"><a href="#cb1-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-222"><a href="#cb1-222" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__delitem__</span>(<span class="va">self</span>, key):</span>
<span id="cb1-223"><a href="#cb1-223" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;This is called when the user writes &#39;del bst[key]&#39;.&quot;&quot;&quot;</span></span>
<span id="cb1-224"><a href="#cb1-224" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.remove(key)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* *** ODSATag: Header *** */</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">// A dictionary implemented using an red-black tree.</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> RedBlackMap<span class="op">&lt;</span>K <span class="kw">extends</span> <span class="bu">Comparable</span><span class="op">&lt;</span>K<span class="op">&gt;,</span> V<span class="op">&gt;</span> <span class="kw">implements</span> <span class="bu">Map</span><span class="op">&lt;</span>K<span class="op">,</span> V<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Node</span> root <span class="op">=</span> <span class="kw">null</span><span class="op">;</span>   <span class="co">// The root of the red black tree.</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> treeSize <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>   <span class="co">// The size of the tree.</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* *** ODSAendTag: Header *** */</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">/* *** ODSATag: Node *** */</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// A node in an red-black tree.</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span> <span class="bu">Node</span> <span class="op">{</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        K key<span class="op">;</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        V value<span class="op">;</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Node</span> left<span class="op">;</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Node</span> right<span class="op">;</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>        <span class="dt">boolean</span> isRed<span class="op">;</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Node</span><span class="op">(</span><span class="dt">boolean</span> isRed<span class="op">,</span> K key<span class="op">,</span> V value<span class="op">,</span> <span class="bu">Node</span> left<span class="op">,</span> <span class="bu">Node</span> right<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>            <span class="kw">this</span><span class="op">.</span><span class="fu">key</span> <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>            <span class="kw">this</span><span class="op">.</span><span class="fu">value</span> <span class="op">=</span> value<span class="op">;</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>            <span class="kw">this</span><span class="op">.</span><span class="fu">left</span> <span class="op">=</span> left<span class="op">;</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>            <span class="kw">this</span><span class="op">.</span><span class="fu">right</span> <span class="op">=</span> right<span class="op">;</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>            <span class="kw">this</span><span class="op">.</span><span class="fu">isRed</span> <span class="op">=</span> isRed<span class="op">;</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="co">/* *** ODSAendTag: Node *** */</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check if a node is red. &#39;null&#39; is always black.</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">boolean</span> <span class="fu">isRed</span><span class="op">(</span><span class="bu">Node</span> node<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>node <span class="op">==</span> <span class="kw">null</span><span class="op">)</span> <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> node<span class="op">.</span><span class="fu">isRed</span><span class="op">;</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="co">/* *** ODSATag: Invariant *** */</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Check that the invariant holds.</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">checkInvariant</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span><span class="fu">isRed</span><span class="op">(</span>root<span class="op">))</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">AssertionError</span><span class="op">(</span><span class="st">&quot;red root&quot;</span><span class="op">);</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>        <span class="bu">ArrayList</span><span class="op">&lt;</span>K<span class="op">&gt;</span> keys <span class="op">=</span> <span class="kw">new</span> <span class="bu">ArrayList</span><span class="op">&lt;&gt;();</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>        <span class="fu">iteratorHelper</span><span class="op">(</span>root<span class="op">,</span> keys<span class="op">);</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>keys<span class="op">.</span><span class="fu">size</span><span class="op">()</span> <span class="op">!=</span> treeSize<span class="op">)</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">AssertionError</span><span class="op">(</span><span class="st">&quot;wrong tree size&quot;</span><span class="op">);</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>        <span class="fu">checkInvariantHelper</span><span class="op">(</span>root<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="kw">null</span><span class="op">);</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Recursive helper method for &#39;check_invariant&#39;.</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Checks that the node is the root of a valid red-black tree, and that</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    <span class="co">// all keys k satisfy lo &lt; k &lt; hi. The test lo &lt; k is skipped</span></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>    <span class="co">// if lo is None, and k &lt; hi is skipped if hi is None.</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Returns the &quot;black height&quot; of the tree.</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="fu">checkInvariantHelper</span><span class="op">(</span><span class="bu">Node</span> node<span class="op">,</span> K lo<span class="op">,</span> K hi<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>node <span class="op">==</span> <span class="kw">null</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>lo <span class="op">!=</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> node<span class="op">.</span><span class="fu">key</span><span class="op">.</span><span class="fu">compareTo</span><span class="op">(</span>lo<span class="op">)</span> <span class="op">&lt;=</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">AssertionError</span><span class="op">(</span><span class="st">&quot;key too small&quot;</span><span class="op">);</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>hi <span class="op">!=</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> node<span class="op">.</span><span class="fu">key</span><span class="op">.</span><span class="fu">compareTo</span><span class="op">(</span>hi<span class="op">)</span> <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">AssertionError</span><span class="op">(</span><span class="st">&quot;key too big&quot;</span><span class="op">);</span></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span><span class="fu">isRed</span><span class="op">(</span>node<span class="op">.</span><span class="fu">right</span><span class="op">))</span></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">AssertionError</span><span class="op">(</span><span class="st">&quot;red right child&quot;</span><span class="op">);</span></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span><span class="fu">isRed</span><span class="op">(</span>node<span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="fu">isRed</span><span class="op">(</span>node<span class="op">.</span><span class="fu">left</span><span class="op">))</span></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">AssertionError</span><span class="op">(</span><span class="st">&quot;red node with red left child&quot;</span><span class="op">);</span></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Keys in the left subtree should be &lt; node.key</span></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Keys in the right subtree should be &gt; node.key</span></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> h1 <span class="op">=</span> <span class="fu">checkInvariantHelper</span><span class="op">(</span>node<span class="op">.</span><span class="fu">left</span><span class="op">,</span> lo<span class="op">,</span> node<span class="op">.</span><span class="fu">key</span><span class="op">);</span></span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> h2 <span class="op">=</span> <span class="fu">checkInvariantHelper</span><span class="op">(</span>node<span class="op">.</span><span class="fu">right</span><span class="op">,</span> node<span class="op">.</span><span class="fu">key</span><span class="op">,</span> hi<span class="op">);</span></span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>h1 <span class="op">!=</span> h2<span class="op">)</span></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">AssertionError</span><span class="op">(</span><span class="st">&quot;unbalanced tree&quot;</span><span class="op">);</span></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> h1 <span class="op">+</span> <span class="op">(</span><span class="fu">isRed</span><span class="op">(</span>node<span class="op">)</span> <span class="op">?</span> <span class="dv">0</span> <span class="op">:</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a><span class="co">/* *** ODSAendTag: Invariant *** */</span></span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Return true if there are no keys.</span></span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">isEmpty</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> root <span class="op">==</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Return the number of keys.</span></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">int</span> <span class="fu">size</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> treeSize<span class="op">;</span></span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Return true if the key has an associated value.</span></span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">containsKey</span><span class="op">(</span>K key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">get</span><span class="op">(</span>key<span class="op">)</span> <span class="op">!=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a><span class="co">/* *** ODSATag: get *** */</span></span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Look up a key.</span></span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> V <span class="fu">get</span><span class="op">(</span>K key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">getHelper</span><span class="op">(</span>root<span class="op">,</span> key<span class="op">);</span></span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Recursive helper method for &#39;get&#39;.</span></span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a>    V <span class="fu">getHelper</span><span class="op">(</span><span class="bu">Node</span> node<span class="op">,</span> K key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>node <span class="op">==</span> <span class="kw">null</span><span class="op">)</span></span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>node<span class="op">.</span><span class="fu">key</span><span class="op">.</span><span class="fu">compareTo</span><span class="op">(</span>key<span class="op">)</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="fu">getHelper</span><span class="op">(</span>node<span class="op">.</span><span class="fu">left</span><span class="op">,</span> key<span class="op">);</span></span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>node<span class="op">.</span><span class="fu">key</span><span class="op">.</span><span class="fu">compareTo</span><span class="op">(</span>key<span class="op">)</span> <span class="op">&lt;</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="fu">getHelper</span><span class="op">(</span>node<span class="op">.</span><span class="fu">right</span><span class="op">,</span> key<span class="op">);</span></span>
<span id="cb2-103"><a href="#cb2-103" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="co">// node.key == key</span></span>
<span id="cb2-104"><a href="#cb2-104" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> node<span class="op">.</span><span class="fu">value</span><span class="op">;</span></span>
<span id="cb2-105"><a href="#cb2-105" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-106"><a href="#cb2-106" aria-hidden="true" tabindex="-1"></a><span class="co">/* *** ODSAendTag: get *** */</span></span>
<span id="cb2-107"><a href="#cb2-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-108"><a href="#cb2-108" aria-hidden="true" tabindex="-1"></a><span class="co">/* *** ODSATag: put *** */</span></span>
<span id="cb2-109"><a href="#cb2-109" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add a key-value pair, or update the value associated with an existing key.</span></span>
<span id="cb2-110"><a href="#cb2-110" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Returns the previous value associated with the key,</span></span>
<span id="cb2-111"><a href="#cb2-111" aria-hidden="true" tabindex="-1"></a>    <span class="co">// or null if the key wasn&#39;t previously present.</span></span>
<span id="cb2-112"><a href="#cb2-112" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> V <span class="fu">put</span><span class="op">(</span>K key<span class="op">,</span> V value<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-113"><a href="#cb2-113" aria-hidden="true" tabindex="-1"></a>        root <span class="op">=</span> <span class="fu">putHelper</span><span class="op">(</span>root<span class="op">,</span> key<span class="op">,</span> value<span class="op">);</span></span>
<span id="cb2-114"><a href="#cb2-114" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span><span class="fu">isRed</span><span class="op">(</span>root<span class="op">))</span></span>
<span id="cb2-115"><a href="#cb2-115" aria-hidden="true" tabindex="-1"></a>            root<span class="op">.</span><span class="fu">isRed</span> <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb2-116"><a href="#cb2-116" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>oldValue <span class="op">==</span> <span class="kw">null</span><span class="op">)</span></span>
<span id="cb2-117"><a href="#cb2-117" aria-hidden="true" tabindex="-1"></a>            treeSize<span class="op">++;</span></span>
<span id="cb2-118"><a href="#cb2-118" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> oldValue<span class="op">;</span></span>
<span id="cb2-119"><a href="#cb2-119" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-120"><a href="#cb2-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-121"><a href="#cb2-121" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Recursive helper method for &#39;put&#39;.</span></span>
<span id="cb2-122"><a href="#cb2-122" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Node</span> <span class="fu">putHelper</span><span class="op">(</span><span class="bu">Node</span> node<span class="op">,</span> K key<span class="op">,</span> V value<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-123"><a href="#cb2-123" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>node <span class="op">==</span> <span class="kw">null</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-124"><a href="#cb2-124" aria-hidden="true" tabindex="-1"></a>            oldValue <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb2-125"><a href="#cb2-125" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Node</span><span class="op">(</span><span class="kw">true</span><span class="op">,</span> key<span class="op">,</span> value<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="kw">null</span><span class="op">);</span></span>
<span id="cb2-126"><a href="#cb2-126" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>node<span class="op">.</span><span class="fu">key</span><span class="op">.</span><span class="fu">compareTo</span><span class="op">(</span>key<span class="op">)</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-127"><a href="#cb2-127" aria-hidden="true" tabindex="-1"></a>            node<span class="op">.</span><span class="fu">left</span> <span class="op">=</span> <span class="fu">putHelper</span><span class="op">(</span>node<span class="op">.</span><span class="fu">left</span><span class="op">,</span> key<span class="op">,</span> value<span class="op">);</span></span>
<span id="cb2-128"><a href="#cb2-128" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>node<span class="op">.</span><span class="fu">key</span><span class="op">.</span><span class="fu">compareTo</span><span class="op">(</span>key<span class="op">)</span> <span class="op">&lt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-129"><a href="#cb2-129" aria-hidden="true" tabindex="-1"></a>            node<span class="op">.</span><span class="fu">right</span> <span class="op">=</span> <span class="fu">putHelper</span><span class="op">(</span>node<span class="op">.</span><span class="fu">right</span><span class="op">,</span> key<span class="op">,</span> value<span class="op">);</span></span>
<span id="cb2-130"><a href="#cb2-130" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span> <span class="co">// node.key == key</span></span>
<span id="cb2-131"><a href="#cb2-131" aria-hidden="true" tabindex="-1"></a>            oldValue <span class="op">=</span> node<span class="op">.</span><span class="fu">value</span><span class="op">;</span></span>
<span id="cb2-132"><a href="#cb2-132" aria-hidden="true" tabindex="-1"></a>            node<span class="op">.</span><span class="fu">value</span> <span class="op">=</span> value<span class="op">;</span></span>
<span id="cb2-133"><a href="#cb2-133" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb2-134"><a href="#cb2-134" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">rebalance</span><span class="op">(</span>node<span class="op">);</span></span>
<span id="cb2-135"><a href="#cb2-135" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-136"><a href="#cb2-136" aria-hidden="true" tabindex="-1"></a><span class="co">/* *** ODSAendTag: put *** */</span></span>
<span id="cb2-137"><a href="#cb2-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-138"><a href="#cb2-138" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Used by put, remove, putHelper and removeHelper,</span></span>
<span id="cb2-139"><a href="#cb2-139" aria-hidden="true" tabindex="-1"></a>    <span class="co">// in order to return the value previously stored in the node.</span></span>
<span id="cb2-140"><a href="#cb2-140" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> V oldValue<span class="op">;</span></span>
<span id="cb2-141"><a href="#cb2-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-142"><a href="#cb2-142" aria-hidden="true" tabindex="-1"></a><span class="co">/* *** ODSATag: remove *** */</span></span>
<span id="cb2-143"><a href="#cb2-143" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Delete a key.</span></span>
<span id="cb2-144"><a href="#cb2-144" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> V <span class="fu">remove</span><span class="op">(</span>K key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-145"><a href="#cb2-145" aria-hidden="true" tabindex="-1"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">UnsupportedOperationException</span><span class="op">(</span><span class="st">&quot;remove is not implemented yet&quot;</span><span class="op">);</span></span>
<span id="cb2-146"><a href="#cb2-146" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-147"><a href="#cb2-147" aria-hidden="true" tabindex="-1"></a><span class="co">/* *** ODSAendTag: remove *** */</span></span>
<span id="cb2-148"><a href="#cb2-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-149"><a href="#cb2-149" aria-hidden="true" tabindex="-1"></a><span class="co">/* *** ODSATag: rebalance *** */</span></span>
<span id="cb2-150"><a href="#cb2-150" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Repair the red-black invariant by rebalancing the node.</span></span>
<span id="cb2-151"><a href="#cb2-151" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Node</span> <span class="fu">rebalance</span><span class="op">(</span><span class="bu">Node</span> node<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-152"><a href="#cb2-152" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>node <span class="op">==</span> <span class="kw">null</span><span class="op">)</span> <span class="cf">return</span> node<span class="op">;</span></span>
<span id="cb2-153"><a href="#cb2-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-154"><a href="#cb2-154" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Skew</span></span>
<span id="cb2-155"><a href="#cb2-155" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span><span class="fu">isRed</span><span class="op">(</span>node<span class="op">.</span><span class="fu">right</span><span class="op">))</span></span>
<span id="cb2-156"><a href="#cb2-156" aria-hidden="true" tabindex="-1"></a>            node <span class="op">=</span> <span class="fu">rotateLeft</span><span class="op">(</span>node<span class="op">);</span></span>
<span id="cb2-157"><a href="#cb2-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-158"><a href="#cb2-158" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Split part 1</span></span>
<span id="cb2-159"><a href="#cb2-159" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span><span class="fu">isRed</span><span class="op">(</span>node<span class="op">.</span><span class="fu">left</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="fu">isRed</span><span class="op">(</span>node<span class="op">.</span><span class="fu">left</span><span class="op">.</span><span class="fu">left</span><span class="op">))</span></span>
<span id="cb2-160"><a href="#cb2-160" aria-hidden="true" tabindex="-1"></a>            node <span class="op">=</span> <span class="fu">rotateRight</span><span class="op">(</span>node<span class="op">);</span></span>
<span id="cb2-161"><a href="#cb2-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-162"><a href="#cb2-162" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Split part 2</span></span>
<span id="cb2-163"><a href="#cb2-163" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span><span class="fu">isRed</span><span class="op">(</span>node<span class="op">.</span><span class="fu">left</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="fu">isRed</span><span class="op">(</span>node<span class="op">.</span><span class="fu">right</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb2-164"><a href="#cb2-164" aria-hidden="true" tabindex="-1"></a>            node<span class="op">.</span><span class="fu">left</span><span class="op">.</span><span class="fu">isRed</span> <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb2-165"><a href="#cb2-165" aria-hidden="true" tabindex="-1"></a>            node<span class="op">.</span><span class="fu">right</span><span class="op">.</span><span class="fu">isRed</span> <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb2-166"><a href="#cb2-166" aria-hidden="true" tabindex="-1"></a>            node<span class="op">.</span><span class="fu">isRed</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb2-167"><a href="#cb2-167" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb2-168"><a href="#cb2-168" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> node<span class="op">;</span></span>
<span id="cb2-169"><a href="#cb2-169" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-170"><a href="#cb2-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-171"><a href="#cb2-171" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Node</span> <span class="fu">rotateLeft</span><span class="op">(</span><span class="bu">Node</span> node<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-172"><a href="#cb2-172" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Left rotation.</span></span>
<span id="cb2-173"><a href="#cb2-173" aria-hidden="true" tabindex="-1"></a>        <span class="co">// </span></span>
<span id="cb2-174"><a href="#cb2-174" aria-hidden="true" tabindex="-1"></a>        <span class="co">//    x                 y</span></span>
<span id="cb2-175"><a href="#cb2-175" aria-hidden="true" tabindex="-1"></a>        <span class="co">//   / \               / \</span></span>
<span id="cb2-176"><a href="#cb2-176" aria-hidden="true" tabindex="-1"></a>        <span class="co">//  A   y     ===&gt;    x   C</span></span>
<span id="cb2-177"><a href="#cb2-177" aria-hidden="true" tabindex="-1"></a>        <span class="co">//     / \           / \</span></span>
<span id="cb2-178"><a href="#cb2-178" aria-hidden="true" tabindex="-1"></a>        <span class="co">//    B   C         A   B</span></span>
<span id="cb2-179"><a href="#cb2-179" aria-hidden="true" tabindex="-1"></a>        <span class="co">// </span></span>
<span id="cb2-180"><a href="#cb2-180" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Variables are named according to the picture above.</span></span>
<span id="cb2-181"><a href="#cb2-181" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Node</span> x <span class="op">=</span> node<span class="op">;</span></span>
<span id="cb2-182"><a href="#cb2-182" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Node</span> A <span class="op">=</span> x<span class="op">.</span><span class="fu">left</span><span class="op">;</span></span>
<span id="cb2-183"><a href="#cb2-183" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Node</span> y <span class="op">=</span> x<span class="op">.</span><span class="fu">right</span><span class="op">;</span></span>
<span id="cb2-184"><a href="#cb2-184" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Node</span> B <span class="op">=</span> y<span class="op">.</span><span class="fu">left</span><span class="op">;</span></span>
<span id="cb2-185"><a href="#cb2-185" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Node</span> C <span class="op">=</span> y<span class="op">.</span><span class="fu">right</span><span class="op">;</span></span>
<span id="cb2-186"><a href="#cb2-186" aria-hidden="true" tabindex="-1"></a>        <span class="co">// We also swap x&#39;s and y&#39;s colours (e.g. if x was black before, then y will be black afterwards).</span></span>
<span id="cb2-187"><a href="#cb2-187" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Node</span><span class="op">(</span>x<span class="op">.</span><span class="fu">isRed</span><span class="op">,</span> y<span class="op">.</span><span class="fu">key</span><span class="op">,</span> y<span class="op">.</span><span class="fu">value</span><span class="op">,</span> <span class="kw">new</span> <span class="bu">Node</span><span class="op">(</span>y<span class="op">.</span><span class="fu">isRed</span><span class="op">,</span> x<span class="op">.</span><span class="fu">key</span><span class="op">,</span> x<span class="op">.</span><span class="fu">value</span><span class="op">,</span> A<span class="op">,</span> B<span class="op">),</span> C<span class="op">);</span></span>
<span id="cb2-188"><a href="#cb2-188" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-189"><a href="#cb2-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-190"><a href="#cb2-190" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Node</span> <span class="fu">rotateRight</span><span class="op">(</span><span class="bu">Node</span> node<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-191"><a href="#cb2-191" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Right rotation.</span></span>
<span id="cb2-192"><a href="#cb2-192" aria-hidden="true" tabindex="-1"></a>        <span class="co">// </span></span>
<span id="cb2-193"><a href="#cb2-193" aria-hidden="true" tabindex="-1"></a>        <span class="co">//      x              y</span></span>
<span id="cb2-194"><a href="#cb2-194" aria-hidden="true" tabindex="-1"></a>        <span class="co">//     / \            / \</span></span>
<span id="cb2-195"><a href="#cb2-195" aria-hidden="true" tabindex="-1"></a>        <span class="co">//    y   C   ===&gt;   A   x</span></span>
<span id="cb2-196"><a href="#cb2-196" aria-hidden="true" tabindex="-1"></a>        <span class="co">//   / \                / \</span></span>
<span id="cb2-197"><a href="#cb2-197" aria-hidden="true" tabindex="-1"></a>        <span class="co">//  A   B              B   C</span></span>
<span id="cb2-198"><a href="#cb2-198" aria-hidden="true" tabindex="-1"></a>        <span class="co">// </span></span>
<span id="cb2-199"><a href="#cb2-199" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Variables are named according to the picture above.</span></span>
<span id="cb2-200"><a href="#cb2-200" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Node</span> x <span class="op">=</span> node<span class="op">;</span></span>
<span id="cb2-201"><a href="#cb2-201" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Node</span> y <span class="op">=</span> x<span class="op">.</span><span class="fu">left</span><span class="op">;</span></span>
<span id="cb2-202"><a href="#cb2-202" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Node</span> A <span class="op">=</span> y<span class="op">.</span><span class="fu">left</span><span class="op">;</span></span>
<span id="cb2-203"><a href="#cb2-203" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Node</span> B <span class="op">=</span> y<span class="op">.</span><span class="fu">right</span><span class="op">;</span></span>
<span id="cb2-204"><a href="#cb2-204" aria-hidden="true" tabindex="-1"></a>        <span class="bu">Node</span> C <span class="op">=</span> x<span class="op">.</span><span class="fu">right</span><span class="op">;</span></span>
<span id="cb2-205"><a href="#cb2-205" aria-hidden="true" tabindex="-1"></a>        <span class="co">// We also swap x&#39;s and y&#39;s colours (e.g. if x was black before, then y will be black afterwards).</span></span>
<span id="cb2-206"><a href="#cb2-206" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Node</span><span class="op">(</span>x<span class="op">.</span><span class="fu">isRed</span><span class="op">,</span> y<span class="op">.</span><span class="fu">key</span><span class="op">,</span> y<span class="op">.</span><span class="fu">value</span><span class="op">,</span> A<span class="op">,</span> <span class="kw">new</span> <span class="bu">Node</span><span class="op">(</span>y<span class="op">.</span><span class="fu">isRed</span><span class="op">,</span> x<span class="op">.</span><span class="fu">key</span><span class="op">,</span> x<span class="op">.</span><span class="fu">value</span><span class="op">,</span> B<span class="op">,</span> C<span class="op">));</span></span>
<span id="cb2-207"><a href="#cb2-207" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-208"><a href="#cb2-208" aria-hidden="true" tabindex="-1"></a><span class="co">/* *** ODSAendTag: rebalance *** */</span></span>
<span id="cb2-209"><a href="#cb2-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-210"><a href="#cb2-210" aria-hidden="true" tabindex="-1"></a><span class="co">/* *** ODSATag: iterator *** */</span></span>
<span id="cb2-211"><a href="#cb2-211" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Iterate through all keys.</span></span>
<span id="cb2-212"><a href="#cb2-212" aria-hidden="true" tabindex="-1"></a>    <span class="co">// This is called when the user writes &#39;for (K key: bst) { ... }.&#39;</span></span>
<span id="cb2-213"><a href="#cb2-213" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">Iterator</span><span class="op">&lt;</span>K<span class="op">&gt;</span> <span class="fu">iterator</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb2-214"><a href="#cb2-214" aria-hidden="true" tabindex="-1"></a>        <span class="co">// The easiest way to solve this is to add all keys to an</span></span>
<span id="cb2-215"><a href="#cb2-215" aria-hidden="true" tabindex="-1"></a>        <span class="co">// ArrayList, then iterate through that.</span></span>
<span id="cb2-216"><a href="#cb2-216" aria-hidden="true" tabindex="-1"></a>        <span class="bu">ArrayList</span><span class="op">&lt;</span>K<span class="op">&gt;</span> keys <span class="op">=</span> <span class="kw">new</span> <span class="bu">ArrayList</span><span class="op">&lt;&gt;();</span></span>
<span id="cb2-217"><a href="#cb2-217" aria-hidden="true" tabindex="-1"></a>        <span class="fu">iteratorHelper</span><span class="op">(</span>root<span class="op">,</span> keys<span class="op">);</span></span>
<span id="cb2-218"><a href="#cb2-218" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> keys<span class="op">.</span><span class="fu">iterator</span><span class="op">();</span></span>
<span id="cb2-219"><a href="#cb2-219" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-220"><a href="#cb2-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-221"><a href="#cb2-221" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Recursive helper method for &#39;iterator&#39;</span></span>
<span id="cb2-222"><a href="#cb2-222" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">iteratorHelper</span><span class="op">(</span><span class="bu">Node</span> node<span class="op">,</span> <span class="bu">ArrayList</span><span class="op">&lt;</span>K<span class="op">&gt;</span> keys<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-223"><a href="#cb2-223" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>node <span class="op">==</span> <span class="kw">null</span><span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb2-224"><a href="#cb2-224" aria-hidden="true" tabindex="-1"></a>        <span class="fu">iteratorHelper</span><span class="op">(</span>node<span class="op">.</span><span class="fu">left</span><span class="op">,</span> keys<span class="op">);</span></span>
<span id="cb2-225"><a href="#cb2-225" aria-hidden="true" tabindex="-1"></a>        keys<span class="op">.</span><span class="fu">add</span><span class="op">(</span>node<span class="op">.</span><span class="fu">key</span><span class="op">);</span></span>
<span id="cb2-226"><a href="#cb2-226" aria-hidden="true" tabindex="-1"></a>        <span class="fu">iteratorHelper</span><span class="op">(</span>node<span class="op">.</span><span class="fu">right</span><span class="op">,</span> keys<span class="op">);</span></span>
<span id="cb2-227"><a href="#cb2-227" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-228"><a href="#cb2-228" aria-hidden="true" tabindex="-1"></a><span class="co">/* *** ODSAendTag: iterator *** */</span></span>
<span id="cb2-229"><a href="#cb2-229" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</section>
</section>
</div></body>
</html>
